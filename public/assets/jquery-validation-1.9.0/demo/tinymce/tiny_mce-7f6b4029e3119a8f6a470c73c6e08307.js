var tinymce={majorVersion:"3",minorVersion:"2.1.1",releaseDate:"2008-11-27",_init:function(){function e(e){return e.src&&/tiny_mce(|_dev|_src|_gzip|_jquery|_prototype).js/.test(e.src)?(/_(src|dev)\.js/g.test(e.src)&&(s.suffix="_src"),-1!=(a=e.src.indexOf("?"))&&(s.query=e.src.substring(a+1)),s.baseURL=e.src.substring(0,e.src.lastIndexOf("/")),r&&-1==s.baseURL.indexOf("://")&&(s.baseURL=r+s.baseURL),s.baseURL):null}var t,n,i,r,a,o,s=this,c=document,l=window,u=navigator,d=u.userAgent;if(s.isOpera=l.opera&&opera.buildNumber,s.isWebKit=/WebKit/.test(d),s.isOldWebKit=s.isWebKit&&!l.getSelection().getRangeAt,s.isIE=!s.isWebKit&&!s.isOpera&&/MSIE/gi.test(d)&&/Explorer/gi.test(u.appName),s.isIE6=s.isIE&&/MSIE [56]/.test(d),s.isGecko=!s.isWebKit&&/Gecko/.test(d),s.isMac=-1!=d.indexOf("Mac"),s.isAir=/adobeair/i.test(d),l.tinyMCEPreInit)return s.suffix=tinyMCEPreInit.suffix,s.baseURL=tinyMCEPreInit.base,s.query=tinyMCEPreInit.query,void 0;for(s.suffix="",n=c.getElementsByTagName("base"),t=0;t<n.length;t++)(o=n[t].href)&&(/^https?:\/\/[^\/]+$/.test(o)&&(o+="/"),r=o?o.match(/.*\//)[0]:"");for(n=c.getElementsByTagName("script"),t=0;t<n.length;t++)if(e(n[t]))return;if(i=c.getElementsByTagName("head")[0])for(n=i.getElementsByTagName("script"),t=0;t<n.length;t++)if(e(n[t]))return},is:function(e,t){var n=typeof e;return t?"array"==t&&e instanceof Array?!0:n==t:"undefined"!=n},each:function(e,t,n){var i,r;if(!e)return 0;if(n=n||e,"undefined"!=typeof e.length){for(i=0,r=e.length;r>i;i++)if(t.call(n,e[i],i,e)===!1)return 0}else for(i in e)if(e.hasOwnProperty(i)&&t.call(n,e[i],i,e)===!1)return 0;return 1},map:function(e,t){var n=[];return tinymce.each(e,function(e){n.push(t(e))}),n},grep:function(e,t){var n=[];return tinymce.each(e,function(e){(!t||t(e))&&n.push(e)}),n},inArray:function(e,t){var n,i;if(e)for(n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},extend:function(e,t){var n,i=arguments;for(n=1;n<i.length;n++)t=i[n],tinymce.each(t,function(t,n){"undefined"!=typeof t&&(e[n]=t)});return e},trim:function(e){return(e?""+e:"").replace(/^\s*|\s*$/g,"")},create:function(e,t){var n,i,r,a,o,s=this,c=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),r=e[3].match(/(^|\.)(\w+)$/i)[2],i=s.createNS(e[3].replace(/\.\w+$/,"")),!i[r]){if("static"==e[2])return i[r]=t,this.onCreate&&this.onCreate(e[2],e[3],i[r]),void 0;t[r]||(t[r]=function(){},c=1),i[r]=t[r],s.extend(i[r].prototype,t),e[5]&&(n=s.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],o=i[r],i[r]=c?function(){return n[a].apply(this,arguments)}:function(){return this.parent=n[a],o.apply(this,arguments)},i[r].prototype[r]=i[r],s.each(n,function(e,t){i[r].prototype[t]=n[t]}),s.each(t,function(e,t){n[t]?i[r].prototype[t]=function(){return this.parent=n[t],e.apply(this,arguments)}:t!=r&&(i[r].prototype[t]=e)})),s.each(t["static"],function(e,t){i[r][t]=e}),this.onCreate&&this.onCreate(e[2],e[3],i[r].prototype)}},walk:function(e,t,n,i){i=i||this,e&&(n&&(e=e[n]),tinymce.each(e,function(e,r){return t.call(i,e,r,n)===!1?!1:(tinymce.walk(e,t,n,i),void 0)}))},createNS:function(e,t){var n,i;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)i=e[n],t[i]||(t[i]={}),t=t[i];return t},resolve:function(e,t){var n,i;for(t=t||window,e=e.split("."),n=0,i=e.length;i>n&&(t=t[e[n]],t);n++);return t},addUnload:function(e,t){function n(){var e,t,o=r.unloads;if(o){for(t in o)e=o[t],e&&e.func&&e.func.call(e.scope,1);a.detachEvent?(a.detachEvent("onbeforeunload",i),a.detachEvent("onunload",n)):a.removeEventListener&&a.removeEventListener("unload",n,!1),r.unloads=e=o=a=n=null,window.CollectGarbage&&window.CollectGarbage()}}function i(){function e(){t.detachEvent("onstop",e),n(),t=null}var t=document;"interactive"==t.readyState&&(t.attachEvent("onstop",e),window.setTimeout(function(){t.detachEvent("onstop",e)},0))}var r=this,a=window;return e={func:e,scope:t||this},r.unloads?r.unloads.push(e):(a.attachEvent?(a.attachEvent("onunload",n),a.attachEvent("onbeforeunload",i)):a.addEventListener&&a.addEventListener("unload",n,!1),r.unloads=[e]),e},removeUnload:function(e){var t=this.unloads,n=null;return tinymce.each(t,function(i,r){return i&&i.func==e?(t.splice(r,1),n=e,!1):void 0}),n},explode:function(e,t){return e?tinymce.map(e.split(t||","),tinymce.trim):e},_addVer:function(e){var t;return this.query?(t=(-1==e.indexOf("?")?"?":"&")+this.query,-1==e.indexOf("#")?e+t:e.replace("#",t+"#")):e}};window.tinymce=tinymce,tinymce._init(),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(e){this.scope=e||this,this.listeners=[]},add:function(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e},addToTop:function(e,t){return this.listeners.unshift({cb:e,scope:t||this.scope}),e},remove:function(e){var t=this.listeners,n=null;return tinymce.each(t,function(i,r){return e==i.cb?(n=e,t.splice(r,1),!1):void 0}),n},dispatch:function(){var e,t,n,i=arguments,r=this.listeners;for(t=0;t<r.length&&(n=r[t],e=n.cb.apply(n.scope,i),e!==!1);t++);return e}}),function(){var e=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(t,n){var i,r=this;return n=r.settings=n||{},/^(mailto|news|javascript|about):/i.test(t)||/^\s*#/.test(t)?(r.source=t,void 0):(0===t.indexOf("/")&&0!==t.indexOf("//")&&(t=(n.base_uri?n.base_uri.protocol||"http":"http")+"://mce_host"+t),-1===t.indexOf(":/")&&0!==t.indexOf("//")&&(t=(n.base_uri.protocol||"http")+"://mce_host"+r.toAbsPath(n.base_uri.path,t)),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),e(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(e,n){var i=t[n];i&&(i=i.replace(/\(mce_at\)/g,"@@")),r[e]=i}),(i=n.base_uri)&&(r.protocol||(r.protocol=i.protocol),r.userInfo||(r.userInfo=i.userInfo),r.port||"mce_host"!=r.host||(r.port=i.port),r.host&&"mce_host"!=r.host||(r.host=i.host),r.source=""),void 0)},setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,n=this;return"./"===e?e:(e=new tinymce.util.URI(e,{base_uri:n}),"mce_host"!=e.host&&n.host!=e.host&&e.host||n.port!=e.port||n.protocol!=e.protocol?e.getURI():(t=n.toRelPath(n.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t))},toAbsolute:function(e,t){var e=new tinymce.util.URI(e,{base_uri:this});return e.getURI(this.host==e.host?t:0)},toRelPath:function(e,t){var n,i,r,a=0,o="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(i=0,r=e.length;r>i;i++)if(i>=n.length||e[i]!=n[i]){a=i+1;break}if(e.length<n.length)for(i=0,r=n.length;r>i;i++)if(i>=e.length||e[i]!=n[i]){a=i+1;break}if(1==a)return t;for(i=0,r=e.length-(a-1);r>i;i++)o+="../";for(i=a-1,r=n.length;r>i;i++)o+=i!=a-1?"/"+n[i]:n[i];return o},toAbsPath:function(t,n){var i,r=0,a=[];for(t=t.split("/"),n=n.split("/"),e(t,function(e){e&&a.push(e)}),t=a,i=n.length-1,a=[];i>=0;i--)0!=n[i].length&&"."!=n[i]&&(".."!=n[i]?r>0?r--:a.push(n[i]):r++);return i=t.length-r,0>=i?"/"+a.reverse().join("/"):"/"+t.slice(0,i).join("/")+"/"+a.reverse().join("/")},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(n.protocol&&(t+=n.protocol+"://"),n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}})}(),function(){var e=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(t){var n,i=this.get(t);return i&&e(i.split("&"),function(e){e=e.split("="),n=n||{},n[unescape(e[0])]=unescape(e[1])}),n},setHash:function(t,n,i,r,a,o){var s="";e(n,function(e,t){s+=(s?"&":"")+escape(t)+"="+escape(e)}),this.set(t,s,i,r,a,o)},get:function(e){var t,n,i=document.cookie,r=e+"=";if(i){if(n=i.indexOf("; "+r),-1==n){if(n=i.indexOf(r),0!=n)return null}else n+=2;return t=i.indexOf(";",n),-1==t&&(t=i.length),unescape(i.substring(n+r.length,t))}},set:function(e,t,n,i,r,a){document.cookie=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(i?"; path="+escape(i):"")+(r?"; domain="+r:"")+(a?"; secure":"")},remove:function(e,t){var n=new Date;n.setTime(n.getTime()-1e3),this.set(e,"",n,t,n)}})}(),tinymce.create("static tinymce.util.JSON",{serialize:function(e){var t,n,i,r=tinymce.util.JSON.serialize;if(null==e)return"null";if(i=typeof e,"string"==i)return n="\bb	t\nn\ff\rr\"\"''\\\\",'"'+e.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(e,i){return t=n.indexOf(i),t+1?"\\"+n.charAt(t+1):(e=i.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+'"';if("object"==i){if(e instanceof Array){for(t=0,n="[";t<e.length;t++)n+=(t>0?",":"")+r(e[t]);return n+"]"}n="{";for(t in e)n+="function"!=typeof e[t]?(n.length>1?',"':'"')+t+'":'+r(e[t]):"";return n+"}"}return""+e},parse:function(s){try{return eval("("+s+")")}catch(ex){}}}),tinymce.create("static tinymce.util.XHR",{send:function(e){function t(e){i=0;try{i=new ActiveXObject(e)}catch(t){}return i}function n(){!e.async||4==i.readyState||o++>1e4?(e.success&&1e4>o&&200==i.status?e.success.call(e.success_scope,""+i.responseText,i,e):e.error&&e.error.call(e.error_scope,o>1e4?"TIMED_OUT":"GENERAL",i,e),i=null):a.setTimeout(n,10)}var i,r,a=window,o=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",i=a.XMLHttpRequest?new XMLHttpRequest:t("Microsoft.XMLHTTP")||t("Msxml2.XMLHTTP")){if(i.overrideMimeType&&i.overrideMimeType(e.content_type),i.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&i.setRequestHeader("Content-Type",e.content_type),i.send(e.data),!e.async)return n();r=a.setTimeout(n,10)}}}),function(){var e=tinymce.extend,t=tinymce.util.JSON,n=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(t){this.settings=e({},t),this.count=0},send:function(i){var r=i.error,a=i.success;i=e(this.settings,i),i.success=function(e,n){e=t.parse(e),"undefined"==typeof e&&(e={error:"JSON Parse error."}),e.error?r.call(i.error_scope||i.scope,e.error,n):a.call(i.success_scope||i.scope,e.result)},i.error=function(e,t){r.call(i.error_scope||i.scope,e,t)},i.data=t.serialize({id:i.id||"c"+this.count++,method:i.method,params:i.params}),i.content_type="application/json",n.send(i)},"static":{sendRPC:function(e){return(new tinymce.util.JSONRequest).send(e)}}})}(),function(){var each=tinymce.each,is=tinymce.is,isWebKit=tinymce.isWebKit,isIE=tinymce.isIE;tinymce.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,listeners:{},pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,cache:{},idPattern:/^#[\w]+$/,elmPattern:/^[\w_*]+$/,elmClassPattern:/^([\w_]*)\.([\w_]+)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(e,t){var n=this;if(n.doc=e,n.win=window,n.files={},n.cssFlicker=!1,n.counter=0,n.boxModel=!tinymce.isIE||"CSS1Compat"==e.compatMode,n.stdMode=8===e.documentMode,this.settings=t=tinymce.extend({keep_values:!1,hex_colors:1,process_html:1},t),tinymce.isIE6)try{e.execCommand("BackgroundImageCache",!1,!0)}catch(i){n.cssFlicker=!0}tinymce.addUnload(n.destroy,n)},getRoot:function(){var e=this,t=e.settings;return t&&e.get(t.root_element)||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,i=this;return e=i.get(e),t=i.getPos(e),n=i.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,i=this;return e=i.get(e),t=i.getStyle(e,"width"),n=i.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t)||e.offsetWidth||e.clientWidth,h:parseInt(n)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){var i,r=this.settings;for(e=this.get(e),r.strict_root&&(n=n||this.getRoot()),is(t,"string")&&(i=t.toUpperCase(),t=function(e){var t=!1;return 1==e.nodeType&&"*"===i?(t=!0,!1):(each(i.split(","),function(n){return 1==e.nodeType&&(r.strict&&e.nodeName.toUpperCase()==n||e.nodeName.toUpperCase()==n)?(t=!0,!1):void 0}),t)});e;){if(e==n)return null;if(t(e))return e;e=e.parentNode}return null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},select:function(pa,s){function get(e,t){return e.getElementsByTagName(t.toLowerCase())}function get(e,t){return e.getElementsByTagName(t)}function collect(e){e.mce_save||(e.mce_save=1,o.push(e))}function collectIE(e){e.getAttribute("mce_save")||(e.setAttribute("mce_save","1"),o.push(e))}function find(e,t,n){var i,r,a=get(n,e);for(i=0,r=a.length;r>i;i++)t(a[i])}var t=this,cs,c,pl,o=[],x,i,l,n,xp;if(s=t.get(s)||t.doc,s.querySelectorAll)return s!=t.doc&&(i=s.id,s.id="_mc_tmp",pa="#_mc_tmp "+pa),l=tinymce.grep(s.querySelectorAll(pa)),s.id=i,l;if(t.selectorRe||(t.selectorRe=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@([\w\\]+)([\^\$\*!]?=)([\w\\]+)\])?(?:\:([\w\\]+))?/i),tinymce.isAir)return each(tinymce.explode(pa),function(e){for((xp=t.cache[e])||(xp="",each(e.split(" "),function(e){e=t.selectorRe.exec(e),xp+=e[1]?"//"+e[1]:"//*",e[2]&&(xp+="[@id='"+e[2]+"']"),e[3]&&each(e[3].split("."),function(e){xp+="[@class = '"+e+"' or contains(concat(' ', @class, ' '), ' "+e+" ')]"})}),t.cache[e]=xp),xp=t.doc.evaluate(xp,s,null,4,null);n=xp.iterateNext();)o.push(n)}),o;if(t.settings.strict,t.elmPattern.test(pa)){for(x=get(s,pa),i=0,l=x.length;l>i;i++)o.push(x[i]);return o}if(t.elmClassPattern.test(pa)){for(pl=t.elmClassPattern.exec(pa),x=get(s,pl[1]||"*"),c=" "+pl[2]+" ",i=0,l=x.length;l>i;i++)n=x[i],n.className&&-1!==(" "+n.className+" ").indexOf(c)&&o.push(n);return o}return each(pa.split(","),function(v,i){if(v=tinymce.trim(v),t.elmPattern.test(v))return each(get(s,v),function(e){collect(e)}),void 0;if(t.elmClassPattern.test(v))return x=t.elmClassPattern.exec(v),each(get(s,x[1]),function(e){t.hasClass(e,x[2])&&collect(e)}),void 0;if(!(cs=t.cache[pa])){for(cs="x=(function(cf, s) {",pl=v.split(" "),each(pl,function(e){var n=t.selectorRe.exec(e);n[1]=n[1]||"*",cs+='find("'+n[1]+'", function(n) {',n[2]&&(cs+='if (n.id !== "'+n[2]+'") return;'),n[3]&&(cs+='var c = " " + n.className + " ";',cs+="if (",c="",each(n[3].split("."),function(e){e&&(c+=(c?"||":"")+'c.indexOf(" '+e+' ") === -1')}),cs+=c+") return;")}),cs+="cf(n);",i=pl.length-1;i>=0;i--)cs+="}, "+(i?"n":"s")+");";cs+="})",t.cache[pa]=cs=eval(cs)}cs(isIE?collectIE:collect,s)}),each(o,function(e){isIE?e.removeAttribute("mce_save"):delete e.mce_save}),o},add:function(e,t,n,i,r){var a=this;return this.run(e,function(e){var o;return o=is(t,"string")?a.doc.createElement(t):t,a.setAttribs(o,n),i&&(i.nodeType?o.appendChild(i):a.setHTML(o,i)),r?o:e.appendChild(o)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var i,r="",a=this;r+="<"+e;for(i in t)t.hasOwnProperty(i)&&(r+=" "+i+'="'+a.encode(t[i])+'"');return tinymce.is(n)?r+">"+n+"</"+e+">":r+" />"},remove:function(e,t){return this.run(e,function(e){var n;return(n=e.parentNode)?(t&&each(e.childNodes,function(t){n.insertBefore(t.cloneNode(!0),e)}),n.removeChild(e)):null})},setStyle:function(e,t,n){var i=this;return i.run(e,function(r){var a;switch(a=r.style,t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),i.pixelStyles.test(t)&&(tinymce.is(n,"number")||/^[\-0-9\.]+$/.test(n))&&(n+="px"),t){case"opacity":isIE&&(a.filter=""===n?"":"alpha(opacity="+100*n+")",e.currentStyle&&e.currentStyle.hasLayout||(a.display="inline-block")),a[t]=a["-moz-opacity"]=a["-khtml-opacity"]=n||"";break;case"float":isIE?a.styleFloat=n:a.cssFloat=n;break;default:a[t]=n||""}i.settings.update_styles&&i.setAttrib(r,"mce_style")})},getStyle:function(e,t,n){if(e=this.get(e),!e)return!1;if(this.doc.defaultView&&n){t=t.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(i){return null}}return t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==t&&(t=isIE?"styleFloat":"cssFloat"),e.currentStyle&&n?e.currentStyle[t]:e.style[t]},setStyles:function(e,t){var n,i=this,r=i.settings;n=r.update_styles,r.update_styles=0,each(t,function(t,n){i.setStyle(e,n,t)}),r.update_styles=n,r.update_styles&&i.setAttrib(e,r.cssText)},setAttrib:function(e,t,n){var i=this;if(e&&t)return i.settings.strict&&(t=t.toLowerCase()),this.run(e,function(e){var r=i.settings;switch(t){case"style":if(!is(n,"string"))return each(n,function(t,n){i.setStyle(e,n,t)}),void 0;r.keep_values&&(n&&!i._isRes(n)?e.setAttribute("mce_style",n,2):e.removeAttribute("mce_style",2)),e.style.cssText=n;break;case"class":e.className=n||"";break;case"src":case"href":r.keep_values&&(r.url_converter&&(n=r.url_converter.call(r.url_converter_scope||i,n,t,e)),i.setAttrib(e,"mce_"+t,n,2));break;case"shape":e.setAttribute("mce_style",n)}is(n)&&null!==n&&0!==n.length?e.setAttribute(t,""+n,2):e.removeAttribute(t,2)})},setAttribs:function(e,t){var n=this;return this.run(e,function(e){each(t,function(t,i){n.setAttrib(e,i,t)})})},getAttrib:function(e,t,n){var i,r=this;if(e=r.get(e),!e||1!==e.nodeType)return!1;if(is(n)||(n=""),/^(src|href|style|coords|shape)$/.test(t)&&(i=e.getAttribute("mce_"+t)))return i;if(isIE&&r.props[t]&&(i=e[r.props[t]],i=i&&i.nodeValue?i.nodeValue:i),i||(i=e.getAttribute(t,2)),"style"===t&&(i=i||e.style.cssText,i&&(i=r.serializeStyle(r.parseStyle(i)),r.settings.keep_values&&!r._isRes(i)&&e.setAttribute("mce_style",i))),isWebKit&&"class"===t&&i&&(i=i.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),isIE)switch(t){case"rowspan":case"colspan":1===i&&(i="");break;case"size":("+0"===i||20===i)&&(i="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===i&&(i="");break;case"hspace":-1===i&&(i="");break;case"maxlength":case"tabindex":(32768===i||2147483647===i||"32768"===i)&&(i="");break;case"compact":case"noshade":case"nowrap":return 65535===i?t:n;case"shape":i=i.toLowerCase();break;default:0===t.indexOf("on")&&i&&(i=(""+i).replace(/^function\s+anonymous\(\)\s+\{\s+(.*)\s+\}$/,"$1"))}return void 0!==i&&null!==i&&""!==i?""+i:n},getPos:function(e){var t,n,i=this,r=0,a=0,o=i.doc;if(e=i.get(e),e&&isIE)return e=e.getBoundingClientRect(),t=i.boxModel?o.documentElement:o.body,r=i.getStyle(i.select("html")[0],"borderWidth"),r=("medium"==r||i.boxModel&&!i.isIE6)&&2||r,e.top+=i.win.self!=i.win.top?2:0,{x:e.left+t.scrollLeft-r,y:e.top+t.scrollTop-r};for(n=e;n;)r+=n.offsetLeft||0,a+=n.offsetTop||0,n=n.offsetParent;for(n=e;n&&(/^table-row|inline.*/i.test(i.getStyle(n,"display",1))||(r-=n.scrollLeft||0,a-=n.scrollTop||0),n=n.parentNode,n!=o.body););return{x:r,y:a}},parseStyle:function(e){function t(e,t,n){var i,r,o,s;i=a[e+"-top"+t],i&&(r=a[e+"-right"+t],i==r&&(o=a[e+"-bottom"+t],r==o&&(s=a[e+"-left"+t],o==s&&(a[n]=s,delete a[e+"-top"+t],delete a[e+"-right"+t],delete a[e+"-bottom"+t],delete a[e+"-left"+t]))))}function n(e,t,n,i){var r;r=a[t],r&&(r=a[n],r&&(r=a[i],r&&(a[e]=a[t]+" "+a[n]+" "+a[i],delete a[t],delete a[n],delete a[i])))}var i=this,r=i.settings,a={};return e?(e=e.replace(/&(#?[a-z0-9]+);/g,"&$1_MCE_SEMI_"),each(e.split(";"),function(e){var t,n=[];e&&(e=e.replace(/_MCE_SEMI_/g,";"),e=e.replace(/url\([^\)]+\)/g,function(e){return n.push(e),"url("+n.length+")"}),e=e.split(":"),t=tinymce.trim(e[1]),t=t.replace(/url\(([^\)]+)\)/g,function(e,t){return n[parseInt(t)-1]}),t=t.replace(/rgb\([^\)]+\)/g,function(e){return i.toHex(e)}),r.url_converter&&(t=t.replace(/url\([\'\"]?([^\)\'\"]+)[\'\"]?\)/g,function(e,t){return"url("+r.url_converter.call(r.url_converter_scope||i,i.decode(t),"style",null)+")"})),a[tinymce.trim(e[0]).toLowerCase()]=t)}),t("border","","border"),t("border","-width","border-width"),t("border","-color","border-color"),t("border","-style","border-style"),t("padding","","padding"),t("margin","","margin"),n("border","border-width","border-style","border-color"),isIE&&"medium none"==a.border&&(a.border=""),a):a},serializeStyle:function(e){var t="";return each(e,function(e,n){if(n&&e){if(tinymce.isGecko&&0===n.indexOf("-moz-"))return;switch(n){case"color":case"background-color":e=e.toLowerCase()}t+=(t?" ":"")+n+": "+e+";"}}),t},loadCSS:function(e){{var t=this;t.doc}e||(e=""),each(e.split(","),function(e){t.files[e]||(t.files[e]=!0,t.add(t.select("head")[0],"link",{rel:"stylesheet",href:tinymce._addVer(e)}))})},addClass:function(e,t){return this.run(e,function(e){var n;return t?this.hasClass(e,t)?e.className:(n=this.removeClass(e,t),e.className=(""!=n?n+" ":"")+t):0})},removeClass:function(e,t){var n,i=this;return i.run(e,function(e){var r;return i.hasClass(e,t)?(n||(n=new RegExp("(^|\\s+)"+t+"(\\s+|$)","g")),r=e.className.replace(n," "),e.className=tinymce.trim(" "!=r?r:"")):e.className})},hasClass:function(e,t){return e=this.get(e),e&&t?-1!==(" "+e.className+" ").indexOf(" "+t+" "):!1},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return e=this.get(e),!e||"none"==e.style.display||"none"==this.getStyle(e,"display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,t){var n=this;return this.run(e,function(e){function i(){try{e.innerHTML="<br />"+t,e.removeChild(e.firstChild)}catch(i){for(;e.firstChild;)e.firstChild.removeNode();r=n.create("div"),r.innerHTML="<br />"+t,each(r.childNodes,function(t,n){n&&e.appendChild(t)})}}var r,a,o,s,c,r;if(t=n.processHTML(t),isIE){if(n.settings.fix_ie_paragraphs&&(t=t.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 mce_keep="true">&nbsp;</p>')),i(),n.settings.fix_ie_paragraphs)for(o=e.getElementsByTagName("p"),a=o.length-1,r=0;a>=0;a--)if(s=o[a],!s.hasChildNodes()){if(!s.mce_keep){r=1;break}s.removeAttribute("mce_keep")}if(r&&(t=t.replace(/<p ([^>]+)>|<p>/g,'<div $1 mce_tmp="1">'),t=t.replace(/<\/p>/g,"</div>"),i(),n.settings.fix_ie_paragraphs))for(o=e.getElementsByTagName("DIV"),a=o.length-1;a>=0;a--)if(s=o[a],s.mce_tmp){for(c=n.doc.createElement("p"),s.cloneNode(!1).outerHTML.replace(/([a-z0-9\-_]+)=/gi,function(e,t){var n;"mce_tmp"!==t&&(n=s.getAttribute(t),n||"class"!==t||(n=s.className),c.setAttribute(t,n))}),r=0;r<s.childNodes.length;r++)c.appendChild(s.childNodes[r].cloneNode(!0));s.swapNode(c)}}else e.innerHTML=t;return t})},processHTML:function(e){function t(e){return e=e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n"),e=e.replace(/^[\r\n]*|[\r\n]*$/g,""),e=e.replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,""),e=e.replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}var n=this,i=n.settings;return i.process_html?(tinymce.isGecko?(e=e.replace(/<(\/?)strong>|<strong( [^>]+)>/gi,"<$1b$2>"),e=e.replace(/<(\/?)em>|<em( [^>]+)>/gi,"<$1i$2>")):isIE&&(e=e.replace(/&apos;/g,"&#39;"),e=e.replace(/\s+(disabled|checked|readonly|selected)\s*=\s*[\"\']?(false|0)[\"\']?/gi,"")),e=e.replace(/<a( )([^>]+)\/>|<a\/>/gi,"<a$1$2></a>"),i.keep_values&&(/<script|style/.test(e)&&(e=e.replace(/<script([^>]+|)>([\s\S]*?)<\/script>/g,function(e,n,i){return i=t(i),n||(n=' type="text/javascript"'),i&&(i="<!--\n"+i+"\n// -->"),"<mce:script"+n+">"+i+"</mce:script>"}),e=e.replace(/<style([^>]+|)>([\s\S]*?)<\/style>/g,function(e,n,i){return i=t(i),"<mce:style"+n+"><!--\n"+i+"\n--></mce:style><style"+n+' mce_bogus="1">'+i+"</style>"})),e=e.replace(/<!\[CDATA\[([\s\S]+)\]\]>/g,"<!--[CDATA[$1]]-->"),e=e.replace(/<([\w:]+) [^>]*(src|href|style|shape|coords)[^>]*>/gi,function(e,t){function r(r,a,o){var s=o;if(-1!=e.indexOf("mce_"+a))return r;if("style"==a){if(n._isRes(o))return r;i.hex_colors&&(s=s.replace(/rgb\([^\)]+\)/g,function(e){return n.toHex(e)})),i.url_converter&&(s=s.replace(/url\([\'\"]?([^\)\'\"]+)\)/g,function(e,r){return"url("+n.encode(i.url_converter.call(i.url_converter_scope||n,n.decode(r),a,t))+")"}))}else"coords"!=a&&"shape"!=a&&i.url_converter&&(s=n.encode(i.url_converter.call(i.url_converter_scope||n,n.decode(o),a,t)));return" "+a+'="'+o+'" mce_'+a+'="'+s+'"'}return e=e.replace(/ (src|href|style|coords|shape)=[\"]([^\"]+)[\"]/gi,r),e=e.replace(/ (src|href|style|coords|shape)=[\']([^\']+)[\']/gi,r),e.replace(/ (src|href|style|coords|shape)=([^\s\"\'>]+)/gi,r)})),e):e},getOuterHTML:function(e){var t;return(e=this.get(e))?isIE?e.outerHTML:(t=(e.ownerDocument||this.doc).createElement("body"),t.appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,t,n){var i=this;return this.run(e,function(e){var r,a;if(e=i.get(e),n=n||e.ownerDocument||i.doc,isIE&&1==e.nodeType)e.outerHTML=t;else{for(a=n.createElement("body"),a.innerHTML=t,r=a.lastChild;r;)i.insertAfter(r.cloneNode(!0),e),r=r.previousSibling;i.remove(e)}})},decode:function(e){var t,n,i;if(/&[^;]+;/.test(e)){if(t=this.doc.createElement("div"),t.innerHTML=e,n=t.firstChild,i="",n)do i+=n.nodeValue;while(n.nextSibling);return i||e}return e},encode:function(e){return e?(""+e).replace(/[<>&\"]/g,function(e){switch(e){case"&":return"&amp;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;"}return e}):e},insertAfter:function(e,t){var n=this;return t=n.get(t),this.run(e,function(e){var n,i;return n=t.parentNode,i=t.nextSibling,i?n.insertBefore(e,i):n.appendChild(e),e})},isBlock:function(e){return e.nodeType&&1!==e.nodeType?!1:(e=e.nodeName||e,/^(H[1-6]|HR|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP)$/.test(e))},replace:function(e,t,n){return is(t,"array")&&(e=e.cloneNode(!0)),this.run(t,function(t){return n&&each(t.childNodes,function(t){e.appendChild(t.cloneNode(!0))}),t.parentNode.replaceChild(e,t)})},toHex:function(e){function t(e){return e=parseInt(e).toString(16),e.length>1?e:"0"+e}var n=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(e);return n?e="#"+t(n[1])+t(n[2])+t(n[3]):e},getClasses:function(){function e(n){each(n.imports,function(t){e(t)}),each(n.cssRules||n.rules,function(n){switch(n.type||1){case 1:n.selectorText&&each(n.selectorText.split(","),function(e){e=e.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(e)&&/\.[\w\-]+$/.test(e)&&(t=e,e=e.replace(/.*\.([a-z0-9_\-]+).*/i,"$1"),(!a||(e=a(e,t)))&&(r[e]||(i.push({"class":e}),r[e]=1)))});break;case 3:e(n.styleSheet)}})}var t,n=this,i=[],r={},a=n.settings.class_filter;if(n.classes)return n.classes;try{each(n.doc.styleSheets,e)}catch(o){}return i.length>0&&(n.classes=i),i},run:function(e,t,n){var i,r=this;return r.doc&&"string"==typeof e&&(e=r.get(e)),e?(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(i=[],each(e,function(e,a){e&&("string"==typeof e&&(e=r.doc.getElementById(e)),i.push(t.call(n,e,a)))}),i)):!1},getAttribs:function(e){var t;return e=this.get(e),e?isIE?(t=[],"OBJECT"==e.nodeName?e.attributes:(e.cloneNode(!1).outerHTML.replace(/([a-z0-9\:\-_]+)=/gi,function(e,n){t.push({specified:1,nodeName:n})}),t)):e.attributes:[]},destroy:function(e){var t=this;t.win=t.doc=t.root=null,e||tinymce.removeUnload(t.destroy)},_isRes:function(e){return/^(top|left|bottom|right|width|height)/i.test(e)||/;\s*(top|left|bottom|right|width|height)/i.test(e)}}),tinymce.DOM=new tinymce.dom.DOMUtils(document,{process_html:0})}(),function(){var e,t=tinymce.each,n=tinymce.DOM,i=tinymce.isIE,r=tinymce.isWebKit;tinymce.create("static tinymce.dom.Event",{inits:[],events:[],add:function(e,r,a,o){var s,c,l=this,u=l.events;return e&&e instanceof Array?(c=[],t(e,function(e){e=n.get(e),c.push(l.add(e,r,a,o))}),c):(e=n.get(e))?(s=function(e){return e=e||window.event,e&&!e.target&&i&&(e.target=e.srcElement),o?a.call(o,e):a(e)},"unload"==r?(tinymce.unloads.unshift({func:s}),s):"init"==r?(l.domLoaded?s():l.inits.push(s),s):(u.push({obj:e,name:r,func:a,cfunc:s,scope:o}),l._add(e,r,s),a)):void 0},remove:function(e,i,r){var a,o=this,s=o.events,c=!1;return e&&e instanceof Array?(a=[],t(e,function(e){e=n.get(e),a.push(o.remove(e,i,r))}),a):(e=n.get(e),t(s,function(t,n){return t.obj!=e||t.name!=i||r&&t.func!=r&&t.cfunc!=r?void 0:(s.splice(n,1),o._remove(e,i,t.cfunc),c=!0,!1)}),c)},clear:function(e){var t,i,r=this,a=r.events;if(e)for(e=n.get(e),t=a.length-1;t>=0;t--)i=a[t],i.obj===e&&(r._remove(i.obj,i.name,i.cfunc),i.obj=i.cfunc=null,a.splice(t,1))},cancel:function(e){return e?(this.stop(e),this.prevent(e)):!1},stop:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1},prevent:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},_unload:function(){var n=e;t(n.events,function(e){n._remove(e.obj,e.name,e.cfunc),e.obj=e.cfunc=null}),n.events=[],n=null},_add:function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!1):e["on"+t]=n},_remove:function(e,t,n){if(e)try{e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!1):e["on"+t]=null}catch(i){}},_pageInit:function(){var n=e;n.domLoaded||(n._remove(window,"DOMContentLoaded",n._pageInit),n.domLoaded=!0,t(n.inits,function(e){e()}),n.inits=[])},_wait:function(){var t;return window.tinyMCE_GZ&&tinyMCE_GZ.loaded?(e.domLoaded=1,void 0):(i&&"https:"!=document.location.protocol?(document.write("<script id=__ie_onload defer src='javascript:\"\"';></script>"),n.get("__ie_onload").onreadystatechange=function(){"complete"==this.readyState&&(e._pageInit(),n.get("__ie_onload").onreadystatechange=null)}):(e._add(window,"DOMContentLoaded",e._pageInit,e),(i||r)&&(t=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(t),e._pageInit())},10))),void 0)}}),e=tinymce.dom.Event,e._wait(),tinymce.addUnload(e._unload)}(),function(){var e=tinymce.each;tinymce.create("tinymce.dom.Element",{Element:function(t,n){var i,r,a=this;n=n||{},a.id=t,a.dom=i=n.dom||tinymce.DOM,a.settings=n,tinymce.isIE||(r=a.dom.get(a.id)),e(["getPos","getRect","getParent","add","setStyle","getStyle","setStyles","setAttrib","setAttribs","getAttrib","addClass","removeClass","hasClass","getOuterHTML","setOuterHTML","remove","show","hide","isHidden","setHTML","get"],function(n){a[n]=function(){var o,s=arguments;return tinymce.isOpera?(s=[t],e(arguments,function(e){s.push(e)})):Array.prototype.unshift.call(s,r||t),o=i[n].apply(i,s),a.update(n),o}})},on:function(e,t,n){return tinymce.dom.Event.add(this.id,e,t,n)},getXY:function(){return{x:parseInt(this.getStyle("left")),y:parseInt(this.getStyle("top"))}},getSize:function(){var e=this.dom.get(this.id);return{w:parseInt(this.getStyle("width")||e.clientWidth),h:parseInt(this.getStyle("height")||e.clientHeight)}},moveTo:function(e,t){this.setStyles({left:e,top:t})},moveBy:function(e,t){var n=this.getXY();this.moveTo(n.x+e,n.y+t)},resizeTo:function(e,t){this.setStyles({width:e,height:t})},resizeBy:function(e,t){var n=this.getSize();this.resizeTo(n.w+e,n.h+t)},update:function(e){var t,n=this,i=n.dom;if(tinymce.isIE6&&n.settings.blocker){if(e=e||"",0===e.indexOf("get")||0===e.indexOf("has")||0===e.indexOf("is"))return;if("remove"==e)return i.remove(n.blocker),void 0;n.blocker?t=i.get(n.blocker):(n.blocker=i.uniqueId(),t=i.add(n.settings.container||i.getRoot(),"iframe",{id:n.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),i.setStyle(t,"opacity",0)),i.setStyle(t,"left",n.getStyle("left",1)),i.setStyle(t,"top",n.getStyle("top",1)),i.setStyle(t,"width",n.getStyle("width",1)),i.setStyle(t,"height",n.getStyle("height",1)),i.setStyle(t,"display",n.getStyle("display",1)),i.setStyle(t,"zIndex",parseInt(n.getStyle("zIndex",1)||0)-1)}}})}(),function(){function e(e){return e.replace(/[\n\r]+/g,"")}var t=tinymce.is,n=tinymce.isIE,i=tinymce.each;tinymce.create("tinymce.dom.Selection",{Selection:function(e,t,n){var r=this;r.dom=e,r.win=t,r.serializer=n,i(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(e){r[e]=new tinymce.util.Dispatcher(r)}),tinymce.addUnload(r.destroy,r)},getContent:function(e){var n,i,r,a=this,o=a.getRng(),s=a.dom.create("body"),c=a.getSel();return e=e||{},n=i="",e.get=!0,e.format=e.format||"html",a.onBeforeGetContent.dispatch(a,e),"text"==e.format?a.isCollapsed()?"":o.text||(c.toString?c.toString():""):(o.cloneContents?(r=o.cloneContents(),r&&s.appendChild(r)):s.innerHTML=t(o.item)||t(o.htmlText)?o.item?o.item(0).outerHTML:o.htmlText:o.toString(),/^\s/.test(s.innerHTML)&&(n=" "),/\s+$/.test(s.innerHTML)&&(i=" "),e.getInner=!0,e.content=a.isCollapsed()?"":n+a.serializer.serialize(s,e)+i,a.onGetContent.dispatch(a,e),e.content)},setContent:function(e,t){var n,i=this,r=i.getRng(),a=i.win.document;
t=t||{format:"html"},t.set=!0,e=t.content=i.dom.processHTML(e),i.onBeforeSetContent.dispatch(i,t),e=t.content,r.insertNode?(e+='<span id="__caret">_</span>',r.deleteContents(),r.insertNode(i.getRng().createContextualFragment(e)),n=i.dom.get("__caret"),r=a.createRange(),r.setStartBefore(n),r.setEndAfter(n),i.setRng(r),a.execCommand("Delete",!1,null),i.dom.remove("__caret")):(r.item&&(a.execCommand("Delete",!1,null),r=i.getRng()),r.pasteHTML(e)),i.onSetContent.dispatch(i,t)},getStart:function(){var e,t=this,i=t.getRng();return n?i.item?i.item(0):(i=i.duplicate(),i.collapse(1),e=i.parentElement(),e&&"BODY"==e.nodeName?e.firstChild:e):(e=i.startContainer,"BODY"==e.nodeName?e.firstChild:t.dom.getParent(e,function(e){return 1==e.nodeType}))},getEnd:function(){var e,t=this,i=t.getRng();return n?i.item?i.item(0):(i=i.duplicate(),i.collapse(0),e=i.parentElement(),e&&"BODY"==e.nodeName?e.lastChild:e):(e=i.endContainer,"BODY"==e.nodeName?e.lastChild:t.dom.getParent(e,function(e){return 1==e.nodeType}))},getBookmark:function(t){function r(t,n,i){for(var r,a=h.dom.doc.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1),o=0,s={};null!=(r=a.nextNode());){if(r==n&&(s.start=o),r==i)return s.end=o,s;o+=e(r.nodeValue||"").length}return null}var a,o,s,c,l,u,d,f,h=this,p=h.getRng(),m=h.dom.getViewPort(h.win),g=-16777215,v=h.dom.getRoot(),y=0,b=0;return o=m.x,s=m.y,"simple"==t?{rng:p,scrollX:o,scrollY:s}:n?p.item?(c=p.item(0),i(h.dom.select(c.nodeName),function(e,t){return c==e?(l=t,!1):void 0}),{tag:c.nodeName,index:l,scrollX:o,scrollY:s}):(a=h.dom.doc.body.createTextRange(),a.moveToElementText(v),a.collapse(!0),u=Math.abs(a.move("character",g)),a=p.duplicate(),a.collapse(!0),l=Math.abs(a.move("character",g)),a=p.duplicate(),a.collapse(!1),d=Math.abs(a.move("character",g))-l,{start:l-u,length:d,scrollX:o,scrollY:s}):(c=h.getNode(),f=h.getSel(),f?c&&"IMG"==c.nodeName?{scrollX:o,scrollY:s}:f.anchorNode==f.focusNode&&f.anchorOffset==f.focusOffset?(c=r(v,f.anchorNode,f.focusNode))?(e(f.anchorNode.nodeValue||"").replace(/^\s+/,function(e){y=e.length}),{start:Math.max(c.start+f.anchorOffset-y,0),end:Math.max(c.end+f.focusOffset-y,0),scrollX:o,scrollY:s,beg:f.anchorOffset-y==0}):{scrollX:o,scrollY:s}:(c=r(v,p.startContainer,p.endContainer),c?{start:Math.max(c.start+p.startOffset-y,0),end:Math.max(c.end+p.endOffset-b,0),scrollX:o,scrollY:s,beg:p.startOffset-y==0}:{scrollX:o,scrollY:s}):null)},moveToBookmark:function(r){function a(t,n,i){for(var a,o,u,d,f=l.dom.doc.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1),h=0,p={};null!=(a=f.nextNode());){if(u=d=0,c=a.nodeValue||"",s=e(c).length,h+=s,h>=n&&!p.startNode){if(o=n-(h-s),r.beg&&o>=s)continue;p.startNode=a,p.startOffset=o+d}if(h>=i)return p.endNode=a,p.endOffset=i-(h-s)+d,p}return null}var o,s,c,l=this,u=l.getRng(),d=l.getSel(),f=l.dom.getRoot();if(!r)return!1;if(l.win.scrollTo(r.scrollX,r.scrollY),n){if(u=r.rng){try{u.select()}catch(h){}return!0}if(l.win.focus(),r.tag)u=f.createControlRange(),i(l.dom.select(r.tag),function(e,t){t==r.index&&u.addElement(e)});else try{if(r.start<0)return!0;u=d.createRange(),u.moveToElementText(f),u.collapse(!0),u.moveStart("character",r.start),u.moveEnd("character",r.length)}catch(p){return!0}try{u.select()}catch(h){}return!0}if(!d)return!1;if(r.rng)d.removeAllRanges(),d.addRange(r.rng);else if(t(r.start)&&t(r.end))try{o=a(f,r.start,r.end),o&&(u=l.dom.doc.createRange(),u.setStart(o.startNode,o.startOffset),u.setEnd(o.endNode,o.endOffset),d.removeAllRanges(),d.addRange(u)),tinymce.isOpera||l.win.focus()}catch(h){}},select:function(e,t){function i(e){return e?u.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1).nextNode():null}function r(e){var t,n,i;if(!e)return null;for(i=u.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);t=i.nextNode();)n=t;return n}var a,o,s,c=this,l=c.getRng(),u=(c.getSel(),c.win.document);if(n)try{a=u.body,/^(IMG|TABLE)$/.test(e.nodeName)?(l=a.createControlRange(),l.addElement(e)):(l=a.createTextRange(),l.moveToElementText(e)),l.select()}catch(d){}else t?(o=i(e),s=r(e),o&&s?(l=u.createRange(),l.setStart(o,0),l.setEnd(s,s.nodeValue.length)):l.selectNode(e)):l.selectNode(e),c.setRng(l);return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:!n||0==t.boundingWidth||t.collapsed},collapse:function(e){var t,n=this,i=n.getRng();i.item&&(t=i.item(0),i=this.win.document.body.createTextRange(),i.moveToElementText(t)),i.collapse(!!e),n.setRng(i)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(){var e,t=this,i=t.getSel();try{i&&(e=i.rangeCount>0?i.getRangeAt(0):i.createRange?i.createRange():t.win.document.createRange())}catch(r){}return e||(e=n?t.win.document.body.createTextRange():t.win.document.createRange()),e},setRng:function(e){var t;if(n)try{e.select()}catch(i){}else t=this.getSel(),t&&(t.removeAllRanges(),t.addRange(e))},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){var e,t=this,i=t.getRng(),r=t.getSel();if(!n){if(!i)return t.dom.getRoot();if(e=i.commonAncestorContainer,!i.collapsed){if(tinymce.isWebKit&&r.anchorNode&&1==r.anchorNode.nodeType)return r.anchorNode.childNodes[r.anchorOffset];i.startContainer==i.endContainer&&i.startOffset-i.endOffset<2&&i.startContainer.hasChildNodes()&&(e=i.startContainer.childNodes[i.startOffset])}return t.dom.getParent(e,function(e){return 1==e.nodeType})}return i.item?i.item(0):i.parentElement()},destroy:function(e){var t=this;t.win=null,e||tinymce.removeUnload(t.destroy)}})}(),function(){tinymce.create("tinymce.dom.XMLWriter",{node:null,XMLWriter:function(){function e(){var e=document.implementation;if(e&&e.createDocument)return e.createDocument("","",null);try{return new ActiveXObject("MSXML2.DOMDocument")}catch(t){}try{return new ActiveXObject("Microsoft.XmlDom")}catch(t){}}this.doc=e(),this.valid=tinymce.isOpera||tinymce.isWebKit,this.reset()},reset:function(){var e=this,t=e.doc;t.firstChild&&t.removeChild(t.firstChild),e.node=t.appendChild(t.createElement("html"))},writeStartElement:function(e){var t=this;t.node=t.node.appendChild(t.doc.createElement(e))},writeAttribute:function(e,t){this.valid&&(t=t.replace(/>/g,"%MCGT%")),this.node.setAttribute(e,t)},writeEndElement:function(){this.node=this.node.parentNode},writeFullEndElement:function(){var e=this,t=e.node;t.appendChild(e.doc.createTextNode("")),e.node=t.parentNode},writeText:function(e){this.valid&&(e=e.replace(/>/g,"%MCGT%")),this.node.appendChild(this.doc.createTextNode(e))},writeCDATA:function(e){this.node.appendChild(this.doc.createCDATA(e))},writeComment:function(e){tinymce.isIE&&(e=e.replace(/^\-|\-$/g," ")),this.node.appendChild(this.doc.createComment(e.replace(/\-\-/g," ")))},getContent:function(){var e;return e=this.doc.xml||(new XMLSerializer).serializeToString(this.doc),e=e.replace(/<\?[^?]+\?>|<html>|<\/html>|<html\/>|<!DOCTYPE[^>]+>/g,""),e=e.replace(/ ?\/>/g," />"),this.valid&&(e=e.replace(/\%MCGT%/g,"&gt;")),e}})}(),function(){tinymce.create("tinymce.dom.StringWriter",{str:null,tags:null,count:0,settings:null,indent:null,StringWriter:function(e){this.settings=tinymce.extend({indent_char:" ",indentation:1},e),this.reset()},reset:function(){this.indent="",this.str="",this.tags=[],this.count=0},writeStartElement:function(e){this._writeAttributesEnd(),this.writeRaw("<"+e),this.tags.push(e),this.inAttr=!0,this.count++,this.elementCount=this.count},writeAttribute:function(e,t){var n=this;n.writeRaw(" "+n.encode(e)+'="'+n.encode(t)+'"')},writeEndElement:function(){var e;this.tags.length>0&&(e=this.tags.pop(),this._writeAttributesEnd(1)&&this.writeRaw("</"+e+">"),this.settings.indentation>0&&this.writeRaw("\n"))},writeFullEndElement:function(){this.tags.length>0&&(this._writeAttributesEnd(),this.writeRaw("</"+this.tags.pop()+">"),this.settings.indentation>0&&this.writeRaw("\n"))},writeText:function(e){this._writeAttributesEnd(),this.writeRaw(this.encode(e)),this.count++},writeCDATA:function(e){this._writeAttributesEnd(),this.writeRaw("<![CDATA["+e+"]]>"),this.count++},writeComment:function(e){this._writeAttributesEnd(),this.writeRaw("<!-- "+e+"-->"),this.count++},writeRaw:function(e){this.str+=e},encode:function(e){return e.replace(/[<>&"]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;"}return e})},getContent:function(){return this.str},_writeAttributesEnd:function(e){return this.inAttr?(this.inAttr=!1,e&&this.elementCount==this.count?(this.writeRaw(" />"),!1):(this.writeRaw(">"),!0)):void 0}})}(),function(){function e(e){var t=[];return"OBJECT"==e.nodeName?e.attributes:(e.cloneNode(!1).outerHTML.replace(/([a-z0-9\:\-_]+)=/gi,function(e,n){t.push({specified:1,nodeName:n})}),t)}function t(e){return e.replace(/([?+*])/g,".$1")}var n=tinymce.extend,i=tinymce.each,r=tinymce.util.Dispatcher,a=tinymce.isIE,o=tinymce.isGecko;tinymce.create("tinymce.dom.Serializer",{Serializer:function(e){var t=this;if(t.key=0,t.onPreProcess=new r(t),t.onPostProcess=new r(t),tinymce.relaxedDomain&&tinymce.isGecko)t.writer=new tinymce.dom.StringWriter;else try{t.writer=new tinymce.dom.XMLWriter}catch(a){t.writer=new tinymce.dom.StringWriter}t.settings=e=n({dom:tinymce.DOM,valid_nodes:0,node_filter:0,attr_filter:0,invalid_attrs:/^(mce_|_moz_)/,closed:/(br|hr|input|meta|img|link|param)/,entity_encoding:"named",entities:"160,nbsp,161,iexcl,162,cent,163,pound,164,curren,165,yen,166,brvbar,167,sect,168,uml,169,copy,170,ordf,171,laquo,172,not,173,shy,174,reg,175,macr,176,deg,177,plusmn,178,sup2,179,sup3,180,acute,181,micro,182,para,183,middot,184,cedil,185,sup1,186,ordm,187,raquo,188,frac14,189,frac12,190,frac34,191,iquest,192,Agrave,193,Aacute,194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,201,Eacute,202,Ecirc,203,Euml,204,Igrave,205,Iacute,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,211,Oacute,212,Ocirc,213,Otilde,214,Ouml,215,times,216,Oslash,217,Ugrave,218,Uacute,219,Ucirc,220,Uuml,221,Yacute,222,THORN,223,szlig,224,agrave,225,aacute,226,acirc,227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,233,eacute,234,ecirc,235,euml,236,igrave,237,iacute,238,icirc,239,iuml,240,eth,241,ntilde,242,ograve,243,oacute,244,ocirc,245,otilde,246,ouml,247,divide,248,oslash,249,ugrave,250,uacute,251,ucirc,252,uuml,253,yacute,254,thorn,255,yuml,402,fnof,913,Alpha,914,Beta,915,Gamma,916,Delta,917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,977,thetasym,978,upsih,982,piv,8226,bull,8230,hellip,8242,prime,8243,Prime,8254,oline,8260,frasl,8472,weierp,8465,image,8476,real,8482,trade,8501,alefsym,8592,larr,8593,uarr,8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8704,forall,8706,part,8707,exist,8709,empty,8711,nabla,8712,isin,8713,notin,8715,ni,8719,prod,8721,sum,8722,minus,8727,lowast,8730,radic,8733,prop,8734,infin,8736,ang,8743,and,8744,or,8745,cap,8746,cup,8747,int,8756,there4,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8804,le,8805,ge,8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,338,OElig,339,oelig,352,Scaron,353,scaron,376,Yuml,710,circ,732,tilde,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,8211,ndash,8212,mdash,8216,lsquo,8217,rsquo,8218,sbquo,8220,ldquo,8221,rdquo,8222,bdquo,8224,dagger,8225,Dagger,8240,permil,8249,lsaquo,8250,rsaquo,8364,euro",bool_attrs:/(checked|disabled|readonly|selected|nowrap)/,valid_elements:"*[*]",extended_valid_elements:0,valid_child_elements:0,invalid_elements:0,fix_table_elements:0,fix_list_elements:!0,fix_content_duplication:!0,convert_fonts_to_spans:!1,font_size_classes:0,font_size_style_values:0,apply_source_formatting:0,indent_mode:"simple",indent_char:"	",indent_levels:1,remove_linebreaks:1,remove_redundant_brs:1,element_format:"xhtml"},e),t.dom=e.dom,e.remove_redundant_brs&&t.onPostProcess.add(function(e,t){t.content=t.content.replace(/<br \/>(\s*<\/li>)/g,"$1")}),"html"==e.element_format&&t.onPostProcess.add(function(e,t){t.content=t.content.replace(/<([^>]+) \/>/g,"<$1>")}),e.fix_list_elements&&t.onPreProcess.add(function(e,n){function i(e,t){for(var n,i=t.split(",");null!=(e=e.previousSibling);)for(n=0;n<i.length;n++)if(e.nodeName==i[n])return e;return null}var r,a,o,s,c,l,u=["ol","ul"],d=/^(OL|UL)$/;for(a=0;a<u.length;a++)for(r=t.dom.select(u[a],n.node),o=0;o<r.length;o++)s=r[o],c=s.parentNode,d.test(c.nodeName)&&(l=i(s,"LI"),l?l.appendChild(s):(l=t.dom.create("li"),l.innerHTML="&nbsp;",l.appendChild(s),c.insertBefore(l,c.firstChild)))}),e.fix_table_elements&&t.onPreProcess.add(function(e,n){i(t.dom.select("table",n.node),function(e){var n,i,r,a,o,s=t.dom.getParent(e,"H1,H2,H3,H4,H5,H6,P"),c=[];if(s){for(n=s.cloneNode(!1),c.push(e),i=e;(i=i.parentNode)&&(c.push(i),i!=s););for(r=n,a=c.length-1;a>=0;a--)if(a==c.length-1)for(;o=c[a-1].nextSibling;)r.appendChild(o.parentNode.removeChild(o));else{if(i=c[a].cloneNode(!1),0!=a)for(;o=c[a-1].nextSibling;)i.appendChild(o.parentNode.removeChild(o));r=r.appendChild(i)}e=t.dom.insertAfter(e.parentNode.removeChild(e),s),t.dom.insertAfter(e,s),t.dom.insertAfter(n,e)}})})},setEntities:function(e){var t,n,i,r=this,a={},o="";if(!r.entityLookup){for(t=e.split(","),n=0;n<t.length;n+=2)i=t[n],34!=i&&38!=i&&60!=i&&62!=i&&(a[String.fromCharCode(t[n])]=t[n+1],i=parseInt(t[n]).toString(16),o+="\\u"+"0000".substring(i.length)+i);if(!o)return r.settings.entity_encoding="raw",void 0;r.entitiesRE=new RegExp("["+o+"]","g"),r.entityLookup=a}},setValidChildRules:function(e){this.childRules=null,this.addValidChildRules(e)},addValidChildRules:function(e){var t,n,r,a=this;e&&(t="A|BR|SPAN|BDO|MAP|OBJECT|IMG|TT|I|B|BIG|SMALL|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|#text|#comment",n="A|BR|SPAN|BDO|OBJECT|APPLET|IMG|MAP|IFRAME|TT|I|B|U|S|STRIKE|BIG|SMALL|FONT|BASEFONT|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|INPUT|SELECT|TEXTAREA|LABEL|BUTTON|#text|#comment",r="H[1-6]|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|FORM|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP",i(e.split(","),function(e){var o,s=e.split(/\[|\]/);e="",i(s[1].split("|"),function(i){switch(e&&(e+="|"),i){case"%itrans":i=n;break;case"%itrans_na":i=n.substring(2);break;case"%istrict":i=t;break;case"%istrict_na":i=t.substring(2);break;case"%btrans":i=r;break;case"%bstrict":i=r}e+=i}),o=new RegExp("^("+e.toLowerCase()+")$","i"),i(s[0].split("/"),function(e){a.childRules=a.childRules||{},a.childRules[e]=o})}),e="",i(a.childRules,function(t,n){e&&(e+="|"),e+=n}),a.parentElementsRE=new RegExp("^("+e.toLowerCase()+")$","i"))},setRules:function(e){var t=this;return t._setup(),t.rules={},t.wildRules=[],t.validElements={},t.addRules(e)},addRules:function(e){var n,r=this;e&&(r._setup(),i(e.split(","),function(e){var a,o,s,c=e.split(/\[|\]/),l=c[0].split("/"),u=[];n&&(o=tinymce.extend([],n.attribs)),c.length>1&&i(c[1].split("|"),function(e){var n,i={};if(o=o||[],e=e.replace(/::/g,"~"),e=/^([!\-])?([\w*.?~_\-]+|)([=:<])?(.+)?$/.exec(e),e[2]=e[2].replace(/~/g,":"),"!"==e[1]&&(a=a||[],a.push(e[2])),"-"==e[1])for(n=0;n<o.length;n++)if(o[n].name==e[2])return o.splice(n,1),void 0;switch(e[3]){case"=":i.defaultVal=e[4]||"";break;case":":i.forcedVal=e[4];break;case"<":i.validVals=e[4].split("?")}/[*.?]/.test(e[2])?(s=s||[],i.nameRE=new RegExp("^"+t(e[2])+"$"),s.push(i)):(i.name=e[2],o.push(i)),u.push(e[2])}),i(l,function(e,c){var d=e.charAt(0),f=1,h={};switch(n&&(n.noEmpty&&(h.noEmpty=n.noEmpty),n.fullEnd&&(h.fullEnd=n.fullEnd),n.padd&&(h.padd=n.padd)),d){case"-":h.noEmpty=!0;break;case"+":h.fullEnd=!0;break;case"#":h.padd=!0;break;default:f=0}l[c]=e=e.substring(f),r.validElements[e]=1,/[*.?]/.test(l[0])?(h.nameRE=new RegExp("^"+t(l[0])+"$"),r.wildRules=r.wildRules||{},r.wildRules.push(h)):(h.name=l[0],"@"==l[0]&&(n=h),r.rules[e]=h),h.attribs=o,a&&(h.requiredAttribs=a),s&&(e="",i(u,function(n){e&&(e+="|"),e+="("+t(n)+")"}),h.validAttribsRE=new RegExp("^"+e.toLowerCase()+"$"),h.wildAttribs=s)})}),e="",i(r.validElements,function(t,n){e&&(e+="|"),"@"!=n&&(e+=n)}),r.validElementsRE=new RegExp("^("+t(e.toLowerCase())+")$"))},findRule:function(e){var t,n,i=this,r=i.rules;if(i._setup(),n=r[e])return n;for(r=i.wildRules,t=0;t<r.length;t++)if(r[t].nameRE.test(e))return r[t];return null},findAttribRule:function(e,t){var n,i=e.wildAttribs;for(n=0;n<i.length;n++)if(i[n].nameRE.test(t))return i[n];return null},serialize:function(e,t){var n=this;return n._setup(),t=t||{},t.format=t.format||"html",n.processObj=t,e=e.cloneNode(!0),n.key=""+(parseInt(n.key)+1),t.no_events||(t.node=e,n.onPreProcess.dispatch(n,t)),n.writer.reset(),n._serializeNode(e,t.getInner),t.content=n.writer.getContent(),t.no_events||n.onPostProcess.dispatch(n,t),n._postProcess(t),t.node=null,tinymce.trim(t.content)},_postProcess:function(e){var t,n=this,i=n.settings,r=e.content;"html"==e.format&&(t=n._protect({content:r,patterns:[{pattern:/(<script[^>]*>)(.*?)(<\/script>)/g},{pattern:/(<style[^>]*>)(.*?)(<\/style>)/g},{pattern:/(<pre[^>]*>)(.*?)(<\/pre>)/g,encode:1},{pattern:/(<!--\[CDATA\[)(.*?)(\]\]-->)/g}]}),r=t.content,"raw"!==i.entity_encoding&&(r=n._encode(r)),e.set||(r=r.replace(/<p>\s+<\/p>|<p([^>]+)>\s+<\/p>/g,"numeric"==i.entity_encoding?"<p$1>&#160;</p>":"<p$1>&nbsp;</p>"),i.remove_linebreaks&&(r=r.replace(/\r?\n|\r/g," "),r=r.replace(/(<[^>]+>)\s+/g,"$1 "),r=r.replace(/\s+(<\/[^>]+>)/g," $1"),r=r.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object) ([^>]+)>\s+/g,"<$1 $2>"),r=r.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>\s+/g,"<$1>"),r=r.replace(/\s+<\/(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>/g,"</$1>")),i.apply_source_formatting&&"simple"==i.indent_mode&&(r=r.replace(/<(\/?)(ul|hr|table|meta|link|tbody|tr|object|body|head|html|map)(|[^>]+)>\s*/g,"\n<$1$2$3>\n"),r=r.replace(/\s*<(p|h[1-6]|blockquote|div|title|style|pre|script|td|li|area)(|[^>]+)>/g,"\n<$1$2>"),r=r.replace(/<\/(p|h[1-6]|blockquote|div|title|style|pre|script|td|li)>\s*/g,"</$1>\n"),r=r.replace(/\n\n/g,"\n"))),r=n._unprotect(r,t),r=r.replace(/<!--\[CDATA\[([\s\S]+)\]\]-->/g,"<![CDATA[$1]]>"),"raw"==i.entity_encoding&&(r=r.replace(/<p>&nbsp;<\/p>|<p([^>]+)>&nbsp;<\/p>/g,"<p$1></p>"))),e.content=r},_serializeNode:function(t,n){var i,r,s,c,l,u,d,f,h,p,m,g,v=this,y=v.settings,b=v.writer;if(!y.node_filter||y.node_filter(t))switch(t.nodeType){case 1:if(t.hasAttribute?t.hasAttribute("mce_bogus"):t.getAttribute("mce_bogus"))return;if(g=!1,i=t.hasChildNodes(),h=t.getAttribute("mce_name")||t.nodeName.toLowerCase(),a&&"HTML"!==t.scopeName&&"html"!==t.scopeName&&(h=t.scopeName+":"+h),0===h.indexOf("mce:")&&(h=h.substring(4)),!v.validElementsRE.test(h)||v.invalidElementsRE&&v.invalidElementsRE.test(h)||n){g=!0;break}if(a){if(y.fix_content_duplication){if(t.mce_serialized==v.key)return;t.mce_serialized=v.key}"/"==h.charAt(0)&&(h=h.substring(1))}else if(o&&"BR"===t.nodeName&&"_moz"==t.getAttribute("type"))return;if(v.childRules){if(v.parentElementsRE.test(v.elementName)&&!v.childRules[v.elementName].test(h)){g=!0;break}v.elementName=h}if(p=v.findRule(h),h=p.name||h,!i&&p.noEmpty||a&&!h){g=!0;break}if(p.requiredAttribs){for(l=p.requiredAttribs,s=l.length-1;s>=0&&""===this.dom.getAttrib(t,l[s]);s--);if(-1==s){g=!0;break}}if(b.writeStartElement(h),p.attribs)for(s=0,u=p.attribs,c=u.length;c>s;s++)l=u[s],f=v._getAttrib(t,l),null!==f&&b.writeAttribute(l.name,f);if(p.validAttribsRE)for(u=a?e(t):t.attributes,s=u.length-1;s>-1;s--)if(d=u[s],d.specified){if(l=d.nodeName.toLowerCase(),y.invalid_attrs.test(l)||!p.validAttribsRE.test(l))continue;m=v.findAttribRule(p,l),f=v._getAttrib(t,m,l),null!==f&&b.writeAttribute(l,f)}p.padd&&(i&&(r=t.firstChild)&&1===r.nodeType&&1===t.childNodes.length?(r.hasAttribute?r.hasAttribute("mce_bogus"):r.getAttribute("mce_bogus"))&&b.writeText(""):i||b.writeText(""));break;case 3:if(v.childRules&&v.parentElementsRE.test(v.elementName)&&!v.childRules[v.elementName].test(t.nodeName))return;return b.writeText(t.nodeValue);case 4:return b.writeCDATA(t.nodeValue);case 8:return b.writeComment(t.nodeValue)}else 1==t.nodeType&&(i=t.hasChildNodes());if(i)for(r=t.firstChild;r;)v._serializeNode(r),v.elementName=h,r=r.nextSibling;g||(i||!y.closed.test(h)?b.writeFullEndElement():b.writeEndElement())},_protect:function(e){function t(e){return e.replace(/[\r\n\\]/g,function(e){return"\n"===e?"\\n":"\\"===e?"\\\\":"\\r"})}function n(e){return e.replace(/\\[\\rn]/g,function(e){return"\\n"===e?"\n":"\\\\"===e?"\\":"\r"})}var r=this;return e.items=e.items||[],i(e.patterns,function(i){e.content=n(t(e.content).replace(i.pattern,function(t,a,o,s){return o=n(o),i.encode&&(o=r._encode(o)),e.items.push(o),a+"<!--mce:"+(e.items.length-1)+"-->"+s}))}),e},_unprotect:function(e,t){return e=e.replace(/\<!--mce:([0-9]+)--\>/g,function(e,n){return t.items[parseInt(n)]}),t.items=[],e},_encode:function(e){var t,n=this,i=n.settings;return"raw"!==i.entity_encoding&&(-1!=i.entity_encoding.indexOf("named")&&(n.setEntities(i.entities),t=n.entityLookup,e=e.replace(n.entitiesRE,function(e){var n;return(n=t[e])&&(e="&"+n+";"),e})),-1!=i.entity_encoding.indexOf("numeric")&&(e=e.replace(/[\u007E-\uFFFF]/g,function(e){return"&#"+e.charCodeAt(0)+";"}))),e},_setup:function(){var e=this,n=this.settings;e.done||(e.done=1,e.setRules(n.valid_elements),e.addRules(n.extended_valid_elements),e.addValidChildRules(n.valid_child_elements),n.invalid_elements&&(e.invalidElementsRE=new RegExp("^("+t(n.invalid_elements.replace(/,/g,"|").toLowerCase())+")$")),n.attrib_value_filter&&(e.attribValueFilter=n.attribValueFilter))},_getAttrib:function(e,t,n){var i,r;if(n=n||t.name,t.forcedVal&&(r=t.forcedVal))return"{$uid}"===r?this.dom.uniqueId():r;if(r=this.dom.getAttrib(e,n),this.settings.bool_attrs.test(n)&&r){if(r=(""+r).toLowerCase(),"false"===r||"0"===r)return null;r=n}switch(n){case"rowspan":case"colspan":"1"==r&&(r="")}if(this.attribValueFilter&&(r=this.attribValueFilter(n,r,e)),t.validVals){for(i=t.validVals.length-1;i>=0&&r!=t.validVals[i];i--);if(-1==i)return null}return""===r&&"undefined"!=typeof t.defaultVal?(r=t.defaultVal,"{$uid}"===r?this.dom.uniqueId():r):("class"==n&&this.processObj.get&&(r=r.replace(/\s?mceItem\w+\s?/g,"")),""===r?null:r)}})}(),function(){var each=tinymce.each,Event=tinymce.dom.Event;tinymce.create("tinymce.dom.ScriptLoader",{ScriptLoader:function(e){this.settings=e||{},this.queue=[],this.lookup={}},isDone:function(e){return this.lookup[e]?2==this.lookup[e].state:0},markDone:function(e){this.lookup[e]={state:2,url:e}},add:function(e,t,n,i){var r,a=this,o=a.lookup;return(r=o[e])?(t&&2==r.state&&t.call(n||this),r):(r={state:0,url:e,func:t,scope:n||this},i?a.queue.unshift(r):a.queue.push(r),o[e]=r,r)},load:function(e,t,n){function i(e){Event.domLoaded||a.settings.strict_mode?tinymce.util.XHR.send({url:tinymce._addVer(e),error:a.settings.error,async:!1,success:function(e){a.eval(e)}}):document.write('<script type="text/javascript" src="'+tinymce._addVer(e)+'"></script>')}var r,a=this;return(r=a.lookup[e])?(t&&2==r.state&&t.call(n||a),r):(tinymce.is(e,"string")?(i(e),t&&t.call(n||a)):(each(e,function(e){i(e)}),t&&t.call(n||a)),void 0)},loadQueue:function(e,t){var n=this;n.queueLoading?e&&n.queueCallbacks.push({func:e,scope:t||n}):(n.queueLoading=1,n.queueCallbacks=[],n.loadScripts(n.queue,function(){n.queueLoading=0,e&&e.call(t||n),each(n.queueCallbacks,function(e){e.func.call(e.scope)})}))},eval:function(co){var w=window;if(w.execScript)w.execScript(co);else try{eval.call(w,co)}catch(ex){eval(co,w)}},loadScripts:function(e,t,n){function i(e){e.state=2,e.func&&e.func.call(e.scope||o)}function r(){var r;r=e.length,each(e,function(e){e=s[e.url],2===e.state?(i(e),r--):a(e)}),0===r&&t&&(t.call(n||o),t=0)}function a(e){e.state>0||(e.state=1,tinymce.dom.ScriptLoader.loadScript(e.url,function(){i(e),r()}))}var o=this,s=o.lookup;each(e,function(e){var n=e.url;if(s[n]?e=s[n]:(s[n]=e,o.queue.push(e)),!(e.state>0))if(Event.domLoaded||o.settings.strict_mode)a(e);else{var c,l="";(t||e.func)&&(e.state=1,c=tinymce.dom.ScriptLoader._addOnLoad(function(){i(e),r()}),l=tinymce.isIE?' onreadystatechange="':' onload="',l+="tinymce.dom.ScriptLoader._onLoad(this,'"+n+"',"+c+');"'),document.write('<script type="text/javascript" src="'+tinymce._addVer(n)+'"'+l+"></script>"),e.func||i(e)}}),r()},"static":{_addOnLoad:function(e){var t=this;return t._funcs=t._funcs||[],t._funcs.push(e),t._funcs.length-1},_onLoad:function(e,t,n){tinymce.isIE&&"complete"!=e.readyState||this._funcs[n].call(this)},loadScript:function(e,t){function n(){Event.clear(r),tinymce.DOM.remove(r),t&&(t.call(document,e),t=0)}var i,r=tinymce.DOM.uniqueId();tinymce.isIE?tinymce.util.XHR.send({url:tinymce._addVer(e),async:!1,success:function(e){window.execScript(e),n()}}):(i=tinymce.DOM.create("script",{id:r,type:"text/javascript",src:tinymce._addVer(e)}),Event.add(i,"load",n),(document.getElementsByTagName("head")[0]||document.body).appendChild(i))}}}),tinymce.ScriptLoader=new tinymce.dom.ScriptLoader}(),function(){var e=tinymce.DOM,t=tinymce.is;tinymce.create("tinymce.ui.Control",{Control:function(e,t){this.id=e,this.settings=t=t||{},this.rendered=!1,this.onRender=new tinymce.util.Dispatcher(this),this.classPrefix="",this.scope=t.scope||this,this.disabled=0,this.active=0},setDisabled:function(t){var n;t!=this.disabled&&(n=e.get(this.id),n&&this.settings.unavailable_prefix&&(t?(this.prevTitle=n.title,n.title=this.settings.unavailable_prefix+": "+n.title):n.title=this.prevTitle),this.setState("Disabled",t),this.setState("Enabled",!t),this.disabled=t)},isDisabled:function(){return this.disabled},setActive:function(e){e!=this.active&&(this.setState("Active",e),this.active=e)},isActive:function(){return this.active},setState:function(t,n){var i=e.get(this.id);t=this.classPrefix+t,n?e.addClass(i,t):e.removeClass(i,t)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(t){e.setHTML(t,this.renderHTML())},postRender:function(){var e,n=this;t(n.disabled)&&(e=n.disabled,n.disabled=-1,n.setDisabled(e)),t(n.active)&&(e=n.active,n.active=-1,n.setActive(e))},remove:function(){e.remove(this.id),this.destroy()},destroy:function(){tinymce.dom.Event.clear(this.id)}})}(),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(e,t){this.parent(e,t),this.controls=[],this.lookup={}},add:function(e){return this.lookup[e.id]=e,this.controls.push(e),e},get:function(e){return this.lookup[e]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(e,t){this.parent(e,t),this.classPrefix="mceSeparator"},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix})}}),function(){{var e=tinymce.is;tinymce.DOM,tinymce.each,tinymce.walk}tinymce.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(e,t){this.parent(e,t),this.classPrefix="mceMenuItem"},setSelected:function(e){this.setState("Selected",e),this.selected=e},isSelected:function(){return this.selected},postRender:function(){var t=this;t.parent(),e(t.selected)&&t.setSelected(t.selected)}})}(),function(){var e=(tinymce.is,tinymce.DOM),t=(tinymce.each,tinymce.walk);tinymce.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(e,t){var n=this;n.parent(e,t),n.items={},n.collapsed=!1,n.menuCount=0,n.onAddItem=new tinymce.util.Dispatcher(this)},expand:function(e){var n=this;e&&t(n,function(e){e.expand&&e.expand()},"items",n),n.collapsed=!1},collapse:function(e){var n=this;e&&t(n,function(e){e.collapse&&e.collapse()},"items",n),n.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(t){return t.settings||(t=new tinymce.ui.MenuItem(t.id||e.uniqueId(),t)),this.onAddItem.dispatch(this,t),this.items[t.id]=t},addSeparator:function(){return this.add({separator:!0})},addMenu:function(e){return e.collapse||(e=this.createMenu(e)),this.menuCount++,this.add(e)},hasMenus:function(){return 0!==this.menuCount},remove:function(e){delete this.items[e.id]},removeAll:function(){var e=this;t(e,function(e){e.removeAll?e.removeAll():e.remove(),e.destroy()},"items",e),e.items={}},createMenu:function(t){var n=new tinymce.ui.Menu(t.id||e.uniqueId(),t);return n.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),n}})}(),function(){var e=tinymce.is,t=tinymce.DOM,n=tinymce.each,i=tinymce.dom.Event,r=tinymce.dom.Element;tinymce.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(n,i){i=i||{},i.container=i.container||t.doc.body,i.offset_x=i.offset_x||0,i.offset_y=i.offset_y||0,i.vp_offset_x=i.vp_offset_x||0,i.vp_offset_y=i.vp_offset_y||0,e(i.icons)&&!i.icons&&(i["class"]+=" mceNoIcons"),this.parent(n,i),this.onShowMenu=new tinymce.util.Dispatcher(this),this.onHideMenu=new tinymce.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(e){var n,i=this,r=i.settings;return e.container=e.container||r.container,e.parent=i,e.constrain=e.constrain||r.constrain,e["class"]=e["class"]||r["class"],e.vp_offset_x=e.vp_offset_x||r.vp_offset_x,e.vp_offset_y=e.vp_offset_y||r.vp_offset_y,n=new tinymce.ui.DropMenu(e.id||t.uniqueId(),e),n.onAddItem.add(i.onAddItem.dispatch,i.onAddItem),n},update:function(){var e,n,i=this,r=i.settings,a=t.get("menu_"+i.id+"_tbl"),o=t.get("menu_"+i.id+"_co");e=r.max_width?Math.min(a.clientWidth,r.max_width):a.clientWidth,n=r.max_height?Math.min(a.clientHeight,r.max_height):a.clientHeight,t.boxModel?i.element.setStyles({width:e,height:n}):i.element.setStyles({width:e+2,height:n+2}),r.max_width&&t.setStyle(o,"width",e),r.max_height&&(t.setStyle(o,"height",n),a.clientHeight<r.max_height&&t.setStyle(o,"overflow","hidden"))},showMenu:function(e,a,o){var s,c,l,u,d,f,h=this,p=h.settings,m=t.getViewPort(),g=2,v=h.classPrefix;h.collapse(1),h.isMenuVisible||(h.rendered?s=t.get("menu_"+h.id):(s=t.add(h.settings.container,h.renderNode()),n(h.items,function(e){e.postRender()}),h.element=new r("menu_"+h.id,{blocker:1,container:p.container})),tinymce.isOpera||t.setStyles(s,{left:-65535,top:-65535}),t.show(s),h.update(),e+=p.offset_x||0,a+=p.offset_y||0,m.w-=4,m.h-=4,p.constrain&&(c=s.clientWidth-g,l=s.clientHeight-g,u=m.x+m.w,d=m.y+m.h,e+p.vp_offset_x+c>u&&(e=o?o-c:Math.max(0,u-p.vp_offset_x-c)),a+p.vp_offset_y+l>d&&(a=Math.max(0,d-p.vp_offset_y-l))),t.setStyles(s,{left:e,top:a}),h.element.update(),h.isMenuVisible=1,h.mouseClickFunc=i.add(s,"click",function(e){var n;if(e=e.target,e&&(e=t.getParent(e,"TR"))&&!t.hasClass(e,v+"ItemSub")){if(n=h.items[e.id],n.isDisabled())return;for(f=h;f;)f.hideMenu&&f.hideMenu(),f=f.settings.parent;return n.settings.onclick&&n.settings.onclick(e),i.cancel(e)}}),h.hasMenus()&&(h.mouseOverFunc=i.add(s,"mouseover",function(e){var n,i;if(e=e.target,e&&(e=t.getParent(e,"TR"))){if(n=h.items[e.id],h.lastMenu&&h.lastMenu.collapse(1),n.isDisabled())return;e&&t.hasClass(e,v+"ItemSub")&&(i=t.getRect(e),n.showMenu(i.x+i.w-g,i.y-g,i.x),h.lastMenu=n,t.addClass(t.get(n.id).firstChild,v+"ItemActive"))}})),h.onShowMenu.dispatch(h),p.keyboard_focus&&(i.add(s,"keydown",h._keyHandler,h),t.select("a","menu_"+h.id)[0].focus(),h._focusIdx=0))},hideMenu:function(e){var n,r=this,a=t.get("menu_"+r.id);r.isMenuVisible&&(i.remove(a,"mouseover",r.mouseOverFunc),i.remove(a,"click",r.mouseClickFunc),i.remove(a,"keydown",r._keyHandler),t.hide(a),r.isMenuVisible=0,e||r.collapse(1),r.element&&r.element.hide(),(n=t.get(r.id))&&t.removeClass(n.firstChild,r.classPrefix+"ItemActive"),r.onHideMenu.dispatch(r))},add:function(e){var n,i=this;return e=i.parent(e),i.isRendered&&(n=t.get("menu_"+i.id))&&i._add(t.select("tbody",n)[0],e),e},collapse:function(e){this.parent(e),this.hideMenu(1)},remove:function(e){return t.remove(e.id),this.destroy(),this.parent(e)},destroy:function(){var e=this,n=t.get("menu_"+e.id);i.remove(n,"mouseover",e.mouseOverFunc),i.remove(n,"click",e.mouseClickFunc),e.element&&e.element.remove(),t.remove(n)},renderNode:function(){var e,i,a,o,s=this,c=s.settings;return o=t.create("div",{id:"menu_"+s.id,"class":c["class"],style:"position:absolute;left:0;top:0;z-index:200000"}),a=t.add(o,"div",{id:"menu_"+s.id+"_co","class":s.classPrefix+(c["class"]?" "+c["class"]:"")}),s.element=new r("menu_"+s.id,{blocker:1,container:c.container}),c.menu_line&&t.add(a,"span",{"class":s.classPrefix+"Line"}),e=t.add(a,"table",{id:"menu_"+s.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),i=t.add(e,"tbody"),n(s.items,function(e){s._add(i,e)
}),s.rendered=!0,o},_keyHandler:function(e){function n(e){var n=i._focusIdx+e,r=t.select("a","menu_"+i.id)[n];r&&(i._focusIdx=n,r.focus())}var i=this,r=e.keyCode;switch(r){case 38:return n(-1),void 0;case 40:return n(1),void 0;case 13:return;case 27:return this.hideMenu()}},_add:function(e,n){var i,r,a,o,s,c=n.settings,l=this.classPrefix;return c.separator?(a=t.add(e,"tr",{id:n.id,"class":l+"ItemSeparator"}),t.add(a,"td",{"class":l+"ItemSeparator"}),(i=a.previousSibling)&&t.addClass(i,"mceLast"),void 0):(i=a=t.add(e,"tr",{id:n.id,"class":l+"Item "+l+"ItemEnabled"}),i=o=t.add(i,"td"),i=r=t.add(i,"a",{href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),t.addClass(o,c["class"]),s=t.add(i,"span",{"class":"mceIcon"+(c.icon?" mce_"+c.icon:"")}),c.icon_src&&t.add(s,"img",{src:c.icon_src}),i=t.add(i,c.element||"span",{"class":"mceText",title:n.settings.title},n.settings.title),n.settings.style&&t.setAttrib(i,"style",n.settings.style),1==e.childNodes.length&&t.addClass(a,"mceFirst"),(i=a.previousSibling)&&t.hasClass(i,l+"ItemSeparator")&&t.addClass(a,"mceFirst"),n.collapse&&t.addClass(a,l+"ItemSub"),(i=a.previousSibling)&&t.removeClass(i,"mceLast"),t.addClass(a,"mceLast"),void 0)}})}(),function(){var e=tinymce.DOM;tinymce.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,t){this.parent(e,t),this.classPrefix="mceButton"},renderHTML:function(){var t,n,i=this.classPrefix,r=this.settings;return n=e.encode(r.label||""),t='<a id="'+this.id+'" href="javascript:;" class="'+i+" "+i+"Enabled "+r["class"]+(n?" "+i+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" title="'+e.encode(r.title)+'">',t+=r.image?'<img class="mceIcon" src="'+r.image+'" />'+n+"</a>":'<span class="mceIcon '+r["class"]+'"></span>'+(n?'<span class="'+i+'Label">'+n+"</span>":"")+"</a>"},postRender:function(){var e=this,t=e.settings;tinymce.dom.Event.add(e.id,"click",function(n){return e.isDisabled()?void 0:t.onclick.call(t.scope,n)})}})}(),function(){var e=tinymce.DOM,t=tinymce.dom.Event,n=tinymce.each,i=tinymce.util.Dispatcher;tinymce.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(e,t){var n=this;n.parent(e,t),n.items=[],n.onChange=new i(n),n.onPostRender=new i(n),n.onAdd=new i(n),n.onRenderMenu=new tinymce.util.Dispatcher(this),n.classPrefix="mceListBox"},select:function(e){var t,i,r=this;return void 0==e?r.selectByIndex(-1):(i=e&&e.call?e:function(t){return t==e},e!=r.selectedValue&&(n(r.items,function(e,n){return i(e.value)?(t=1,r.selectByIndex(n),!1):void 0}),t||r.selectByIndex(-1)),void 0)},selectByIndex:function(t){var n,i,r=this;t!=r.selectedIndex?(n=e.get(r.id+"_text"),i=r.items[t],i?(r.selectedValue=i.value,r.selectedIndex=t,e.setHTML(n,e.encode(i.title)),e.removeClass(n,"mceTitle")):(e.setHTML(n,e.encode(r.settings.title)),e.addClass(n,"mceTitle"),r.selectedValue=r.selectedIndex=null),n=0):r.selectedValue=r.selectedIndex=null},add:function(e,t,n){var i=this;n=n||{},n=tinymce.extend(n,{title:e,value:t}),i.items.push(n),i.onAdd.dispatch(i,n)},getLength:function(){return this.items.length},renderHTML:function(){var t="",n=this,i=n.settings,r=n.classPrefix;return t='<table id="'+n.id+'" cellpadding="0" cellspacing="0" class="'+r+" "+r+"Enabled"+(i["class"]?" "+i["class"]:"")+'"><tbody><tr>',t+="<td>"+e.createHTML("a",{id:n.id+"_text",href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},e.encode(n.settings.title))+"</td>",t+="<td>"+e.createHTML("a",{id:n.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},"<span></span>")+"</td>",t+="</tr></tbody></table>"},showMenu:function(){var i,r,a,o=this,s=e.get(this.id);if(!o.isDisabled()&&0!=o.items.length){if(o.menu&&o.menu.isMenuVisible)return o.hideMenu();o.isMenuRendered||(o.renderMenu(),o.isMenuRendered=!0),i=e.getPos(this.settings.menu_container),r=e.getPos(s),a=o.menu,a.settings.offset_x=r.x,a.settings.offset_y=r.y,a.settings.keyboard_focus=!tinymce.isOpera,o.oldID&&a.items[o.oldID].setSelected(0),n(o.items,function(e){e.value===o.selectedValue&&(a.items[e.id].setSelected(1),o.oldID=e.id)}),a.showMenu(0,s.clientHeight),t.add(e.doc,"mousedown",o.hideMenu,o),e.addClass(o.id,o.classPrefix+"Selected")}},hideMenu:function(n){var i=this;(!n||"mousedown"!=n.type||n.target.id!=i.id+"_text"&&n.target.id!=i.id+"_open")&&(n&&e.getParent(n.target,function(t){return e.hasClass(t,"mceMenu")})||(e.removeClass(i.id,i.classPrefix+"Selected"),t.remove(e.doc,"mousedown",i.hideMenu,i),i.menu&&i.menu.hideMenu()))},renderMenu:function(){var t,i=this;t=i.settings.control_manager.createDropMenu(i.id+"_menu",{menu_line:1,"class":i.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150}),t.onHideMenu.add(i.hideMenu,i),t.add({title:i.settings.title,"class":"mceMenuItemTitle",onclick:function(){i.settings.onselect("")!==!1&&i.select("")}}),n(i.items,function(n){n.id=e.uniqueId(),n.onclick=function(){i.settings.onselect(n.value)!==!1&&i.select(n.value)},t.add(n)}),i.onRenderMenu.dispatch(i,t),i.menu=t},postRender:function(){var i=this,r=i.classPrefix;t.add(i.id,"click",i.showMenu,i),t.add(i.id+"_text","focus",function(){i._focused||(i.keyDownHandler=t.add(i.id+"_text","keydown",function(e){var r,a=-1,o=e.keyCode;if(n(i.items,function(e,t){i.selectedValue==e.value&&(a=t)}),38==o)r=i.items[a-1];else if(40==o)r=i.items[a+1];else if(13==o)return r=i.selectedValue,i.selectedValue=null,i.settings.onselect(r),t.cancel(e);r&&(i.hideMenu(),i.select(r.value))})),i._focused=1}),t.add(i.id+"_text","blur",function(){t.remove(i.id+"_text","keydown",i.keyDownHandler),i._focused=0}),(tinymce.isIE6||!e.boxModel)&&(t.add(i.id,"mouseover",function(){e.hasClass(i.id,r+"Disabled")||e.addClass(i.id,r+"Hover")}),t.add(i.id,"mouseout",function(){e.hasClass(i.id,r+"Disabled")||e.removeClass(i.id,r+"Hover")})),i.onPostRender.dispatch(i,e.get(i.id))},destroy:function(){this.parent(),t.clear(this.id+"_text")}})}(),function(){{var e=tinymce.DOM,t=tinymce.dom.Event,n=tinymce.each;tinymce.util.Dispatcher}tinymce.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(e,t){this.parent(e,t),this.classPrefix="mceNativeListBox"},setDisabled:function(t){e.get(this.id).disabled=t},isDisabled:function(){return e.get(this.id).disabled},select:function(e){var t,i,r=this;return void 0==e?r.selectByIndex(-1):(i=e&&e.call?e:function(t){return t==e},e!=r.selectedValue&&(n(r.items,function(e,n){return i(e.value)?(t=1,r.selectByIndex(n),!1):void 0}),t||r.selectByIndex(-1)),void 0)},selectByIndex:function(t){e.get(this.id).selectedIndex=t+1,this.selectedValue=this.items[t]?this.items[t].value:null},add:function(t,n,i){var r,a=this;i=i||{},i.value=n,a.isRendered()&&e.add(e.get(this.id),"option",i,t),r={title:t,value:n,attribs:i},a.items.push(r),a.onAdd.dispatch(a,r)},getLength:function(){return e.get(this.id).options.length-1},renderHTML:function(){var t,i=this;return t=e.createHTML("option",{value:""},"-- "+i.settings.title+" --"),n(i.items,function(n){t+=e.createHTML("option",{value:n.value},n.title)}),t=e.createHTML("select",{id:i.id,"class":"mceNativeListBox"},t)},postRender:function(){function n(e){var t=r.items[e.target.selectedIndex-1];t&&(t=t.value)&&(r.onChange.dispatch(r,t),r.settings.onselect&&r.settings.onselect(t))}var i,r=this;r.rendered=!0,t.add(r.id,"change",n),t.add(r.id,"keydown",function(e){var a;return t.remove(r.id,"change",i),a=t.add(r.id,"blur",function(){t.add(r.id,"change",n),t.remove(r.id,"blur",a)}),13==e.keyCode||32==e.keyCode?(n(e),t.cancel(e)):void 0}),r.onPostRender.dispatch(r,e.get(r.id))}})}(),function(){{var e=tinymce.DOM,t=tinymce.dom.Event;tinymce.each}tinymce.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(t,n){this.parent(t,n),this.onRenderMenu=new tinymce.util.Dispatcher(this),n.menu_container=n.menu_container||e.doc.body},showMenu:function(){var n,i,r,a=this,o=e.get(a.id);if(!a.isDisabled()){if(a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0),a.isMenuVisible)return a.hideMenu();n=e.getPos(a.settings.menu_container),i=e.getPos(o),r=a.menu,r.settings.offset_x=i.x,r.settings.offset_y=i.y,r.settings.vp_offset_x=i.x,r.settings.vp_offset_y=i.y,r.settings.keyboard_focus=a._focused,r.showMenu(0,o.clientHeight),t.add(e.doc,"mousedown",a.hideMenu,a),a.setState("Selected",1),a.isMenuVisible=1}},renderMenu:function(){var e,t=this;e=t.settings.control_manager.createDropMenu(t.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:t.settings.icons}),e.onHideMenu.add(t.hideMenu,t),t.onRenderMenu.dispatch(t,e),t.menu=e},hideMenu:function(n){var i=this;n&&"mousedown"==n.type&&e.getParent(n.target,function(e){return e.id===i.id||e.id===i.id+"_open"})||(n&&e.getParent(n.target,function(t){return e.hasClass(t,"mceMenu")})||(i.setState("Selected",0),t.remove(e.doc,"mousedown",i.hideMenu,i),i.menu&&i.menu.hideMenu()),i.isMenuVisible=0)},postRender:function(){var e=this,n=e.settings;t.add(e.id,"click",function(){e.isDisabled()||(n.onclick&&n.onclick(e.value),e.showMenu())})}})}(),function(){{var e=tinymce.DOM,t=tinymce.dom.Event;tinymce.each}tinymce.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(e,t){this.parent(e,t),this.classPrefix="mceSplitButton"},renderHTML:function(){var t,n,i=this,r=i.settings;return t="<tbody><tr>",n=r.image?e.createHTML("img ",{src:r.image,"class":"mceAction "+r["class"]}):e.createHTML("span",{"class":"mceAction "+r["class"]},""),t+="<td>"+e.createHTML("a",{id:i.id+"_action",href:"javascript:;","class":"mceAction "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},n)+"</td>",n=e.createHTML("span",{"class":"mceOpen "+r["class"]}),t+="<td>"+e.createHTML("a",{id:i.id+"_open",href:"javascript:;","class":"mceOpen "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},n)+"</td>",t+="</tr></tbody>",e.createHTML("table",{id:i.id,"class":"mceSplitButton mceSplitButtonEnabled "+r["class"],cellpadding:"0",cellspacing:"0",onmousedown:"return false;",title:r.title},t)},postRender:function(){var n=this,i=n.settings;i.onclick&&t.add(n.id+"_action","click",function(){n.isDisabled()||i.onclick(n.value)}),t.add(n.id+"_open","click",n.showMenu,n),t.add(n.id+"_open","focus",function(){n._focused=1}),t.add(n.id+"_open","blur",function(){n._focused=0}),(tinymce.isIE6||!e.boxModel)&&(t.add(n.id,"mouseover",function(){e.hasClass(n.id,"mceSplitButtonDisabled")||e.addClass(n.id,"mceSplitButtonHover")}),t.add(n.id,"mouseout",function(){e.hasClass(n.id,"mceSplitButtonDisabled")||e.removeClass(n.id,"mceSplitButtonHover")}))},destroy:function(){this.parent(),t.clear(this.id+"_action"),t.clear(this.id+"_open")}})}(),function(){var e=tinymce.DOM,t=tinymce.dom.Event,n=tinymce.is,i=tinymce.each;tinymce.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(e,t){var n=this;n.parent(e,t),n.settings=t=tinymce.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},n.settings),n.onShowMenu=new tinymce.util.Dispatcher(n),n.onHideMenu=new tinymce.util.Dispatcher(n),n.value=t.default_color},showMenu:function(){var n,i,r=this;if(!r.isDisabled()){if(r.isMenuRendered||(r.renderMenu(),r.isMenuRendered=!0),r.isMenuVisible)return r.hideMenu();n=e.get(r.id),e.show(r.id+"_menu"),e.addClass(n,"mceSplitButtonSelected"),i=e.getPos(n),e.setStyles(r.id+"_menu",{left:i.x,top:i.y+n.clientHeight,zIndex:2e5}),n=0,t.add(e.doc,"mousedown",r.hideMenu,r),r._focused&&(r._keyHandler=t.add(r.id+"_menu","keydown",function(e){27==e.keyCode&&r.hideMenu()}),e.select("a",r.id+"_menu")[0].focus()),r.onShowMenu.dispatch(r),r.isMenuVisible=1}},hideMenu:function(n){var i=this;n&&"mousedown"==n.type&&e.getParent(n.target,function(e){return e.id===i.id+"_open"})||(n&&e.getParent(n.target,function(t){return e.hasClass(t,"mceSplitButtonMenu")})||(e.removeClass(i.id,"mceSplitButtonSelected"),t.remove(e.doc,"mousedown",i.hideMenu,i),t.remove(i.id+"_menu","keydown",i._keyHandler),e.hide(i.id+"_menu")),i.onHideMenu.dispatch(i),i.isMenuVisible=0)},renderMenu:function(){var r,a,o,s,c,l=this,u=0,d=l.settings;return c=e.add(d.menu_container,"div",{id:l.id+"_menu","class":d.menu_class+" "+d["class"],style:"position:absolute;left:0;top:-1000px;"}),r=e.add(c,"div",{"class":d["class"]+" mceSplitButtonMenu"}),e.add(r,"span",{"class":"mceMenuLine"}),a=e.add(r,"table",{"class":"mceColorSplitMenu"}),o=e.add(a,"tbody"),u=0,i(n(d.colors,"array")?d.colors:d.colors.split(","),function(t){t=t.replace(/^#/,""),u--||(s=e.add(o,"tr"),u=d.grid_width-1),a=e.add(s,"td"),a=e.add(a,"a",{href:"javascript:;",style:{backgroundColor:"#"+t},mce_color:"#"+t})}),d.more_colors_func&&(a=e.add(o,"tr"),a=e.add(a,"td",{colspan:d.grid_width,"class":"mceMoreColors"}),a=e.add(a,"a",{id:l.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},d.more_colors_title),t.add(a,"click",function(e){return d.more_colors_func.call(d.more_colors_scope||this),t.cancel(e)})),e.addClass(r,"mceColorSplitMenu"),t.add(l.id+"_menu","click",function(e){var n;return e=e.target,"A"==e.nodeName&&(n=e.getAttribute("mce_color"))&&l.setColor(n),t.cancel(e)}),c},setColor:function(t){var n=this;e.setStyle(n.id+"_preview","backgroundColor",t),n.value=t,n.hideMenu(),n.settings.onselect(t)},postRender:function(){var t=this,n=t.id;t.parent(),e.add(n+"_action","div",{id:n+"_preview","class":"mceColorPreview"}),e.setStyle(t.id+"_preview","backgroundColor",t.value)},destroy:function(){this.parent(),t.clear(this.id+"_menu"),t.clear(this.id+"_more"),e.remove(this.id+"_menu")}})}(),tinymce.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var e,t,n,i,r,a,o=this,s="",c=tinymce.DOM,l=o.settings;for(a=o.controls,n=0;n<a.length;n++)t=a[n],i=a[n-1],r=a[n+1],0===n&&(e="mceToolbarStart",t.Button?e+=" mceToolbarStartButton":t.SplitButton?e+=" mceToolbarStartSplitButton":t.ListBox&&(e+=" mceToolbarStartListBox"),s+=c.createHTML("td",{"class":e},c.createHTML("span",null,"<!-- IE -->"))),i&&t.ListBox&&(i.Button||i.SplitButton)&&(s+=c.createHTML("td",{"class":"mceToolbarEnd"},c.createHTML("span",null,"<!-- IE -->"))),s+=c.stdMode?'<td style="position: relative">'+t.renderHTML()+"</td>":"<td>"+t.renderHTML()+"</td>",r&&t.ListBox&&(r.Button||r.SplitButton)&&(s+=c.createHTML("td",{"class":"mceToolbarStart"},c.createHTML("span",null,"<!-- IE -->")));return e="mceToolbarEnd",t.Button?e+=" mceToolbarEndButton":t.SplitButton?e+=" mceToolbarEndSplitButton":t.ListBox&&(e+=" mceToolbarEndListBox"),s+=c.createHTML("td",{"class":e},c.createHTML("span",null,"<!-- IE -->")),c.createHTML("table",{id:o.id,"class":"mceToolbar"+(l["class"]?" "+l["class"]:""),cellpadding:"0",cellspacing:"0",align:o.settings.align||""},"<tbody><tr>"+s+"</tr></tbody>")}}),function(){{var e=tinymce.util.Dispatcher;tinymce.each}tinymce.create("tinymce.AddOnManager",{items:[],urls:{},lookup:{},onAdd:new e(this),get:function(e){return this.lookup[e]},requireLangPack:function(e){var t,n=tinymce.EditorManager.settings;n&&n.language&&(t=this.urls[e]+"/langs/"+n.language+".js",tinymce.dom.Event.domLoaded||n.strict_mode?tinymce.ScriptLoader.add(t):tinymce.ScriptLoader.load(t))},add:function(e,t){return this.items.push(t),this.lookup[e]=t,this.onAdd.dispatch(this,e,t),t},load:function(e,t,n,i){var r=this;r.urls[e]||(0!=t.indexOf("/")&&-1==t.indexOf("://")&&(t=tinymce.baseURL+"/"+t),r.urls[e]=t.substring(0,t.lastIndexOf("/")),tinymce.ScriptLoader.add(t,n,i))}}),tinymce.PluginManager=new tinymce.AddOnManager,tinymce.ThemeManager=new tinymce.AddOnManager}(),function(){var e=tinymce.each,t=tinymce.extend,n=tinymce.DOM,i=tinymce.dom.Event,r=tinymce.ThemeManager,a=tinymce.PluginManager,o=tinymce.explode;tinymce.create("static tinymce.EditorManager",{editors:{},i18n:{},activeEditor:null,preInit:function(){var e=this,t=window.location;tinymce.documentBaseURL=t.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(tinymce.documentBaseURL)||(tinymce.documentBaseURL+="/"),tinymce.baseURL=new tinymce.util.URI(tinymce.documentBaseURL).toAbsolute(tinymce.baseURL),tinymce.EditorManager.baseURI=new tinymce.util.URI(tinymce.baseURL),document.domain&&t.hostname!=document.domain&&(tinymce.relaxedDomain=document.domain),!tinymce.relaxedDomain&&tinymce.EditorManager.baseURI.host!=t.hostname&&t.hostname&&(document.domain=tinymce.relaxedDomain=t.hostname.replace(/.*\.(.+\..+)$/,"$1")),e.onBeforeUnload=new tinymce.util.Dispatcher(e),i.add(window,"beforeunload",function(t){e.onBeforeUnload.dispatch(e,t)})},init:function(s){function c(e,t,n){var i=e[t];if(i)return tinymce.is(i,"string")&&(n=i.replace(/\.\w+$/,""),n=n?tinymce.resolve(n):0,i=tinymce.resolve(i)),i.apply(n||this,Array.prototype.slice.call(arguments,2))}var l,u,d,f,h=this,p=tinymce.ScriptLoader,m=[];s=t({theme:"simple",language:"en",strict_loading_mode:"application/xhtml+xml"==document.contentType},s),h.settings=s,i.domLoaded||s.strict_loading_mode||(s.language&&p.add(tinymce.baseURL+"/langs/"+s.language+".js"),s.theme&&"-"!=s.theme.charAt(0)&&!r.urls[s.theme]&&r.load(s.theme,"themes/"+s.theme+"/editor_template"+tinymce.suffix+".js"),s.plugins&&(l=o(s.plugins),-1!=tinymce.inArray(l,"compat2x")&&a.load("compat2x","plugins/compat2x/editor_plugin"+tinymce.suffix+".js"),e(l,function(e){if(e&&"-"!=e.charAt(0)&&!a.urls[e]){if(!tinymce.isWebKit&&"safari"==e)return;a.load(e,"plugins/"+e+"/editor_plugin"+tinymce.suffix+".js")}})),p.loadQueue()),i.add(document,"init",function(){function t(e,t){return t.constructor===RegExp?t.test(e.className):n.hasClass(e,t)}var i,r;if(c(s,"onpageload"),!s.browsers||(i=!1,e(o(s.browsers),function(e){switch(e){case"ie":case"msie":tinymce.isIE&&(i=!0);break;case"gecko":tinymce.isGecko&&(i=!0);break;case"safari":case"webkit":tinymce.isWebKit&&(i=!0);break;case"opera":tinymce.isOpera&&(i=!0)}}),i)){switch(s.mode){case"exact":i=s.elements||"",i.length>0&&e(o(i),function(t){n.get(t)?(f=new tinymce.Editor(t,s),m.push(f),f.render(1)):(u=0,e(document.forms,function(i){e(i.elements,function(e){e.name===t&&(t="mce_editor_"+u,n.setAttrib(e,"id",t),f=new tinymce.Editor(t,s),m.push(f),f.render(1))})}))});break;case"textareas":case"specific_textareas":e(n.select("textarea"),function(e){s.editor_deselector&&t(e,s.editor_deselector)||(!s.editor_selector||t(e,s.editor_selector))&&(d=n.get(e.name),e.id||d||(e.id=e.name),(!e.id||h.get(e.id))&&(e.id=n.uniqueId()),f=new tinymce.Editor(e.id,s),m.push(f),f.render(1))})}s.oninit&&(i=r=0,e(m,function(e){r++,e.initialized?i++:e.onInit.add(function(){i++,i==r&&c(s,"oninit")}),i==r&&c(s,"oninit")}))}})},get:function(e){return this.editors[e]},getInstanceById:function(e){return this.get(e)},add:function(e){return this.editors[e.id]=e,this._setActive(e),e},remove:function(t){var n=this;return n.editors[t.id]?(delete n.editors[t.id],n.activeEditor==t&&e(n.editors,function(e){return n._setActive(e),!1}),t.destroy(),t):null},execCommand:function(e,t,n){function i(){o.destroy(),r.detachEvent("onunload",i),r=r.tinyMCE=r.tinymce=null}var r,a=this,o=a.get(n);switch(e){case"mceFocus":return o.focus(),!0;case"mceAddEditor":case"mceAddControl":return a.get(n)||new tinymce.Editor(n,a.settings).render(),!0;case"mceAddFrameControl":return r=n.window,r.tinyMCE=tinyMCE,r.tinymce=tinymce,tinymce.DOM.doc=r.document,tinymce.DOM.win=r,o=new tinymce.Editor(n.element_id,n),o.render(),tinymce.isIE&&r.attachEvent("onunload",i),n.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return o&&o.remove(),!0;case"mceToggleEditor":return o?(o.isHidden()?o.show():o.hide(),!0):(a.execCommand("mceAddControl",0,n),!0)}return a.activeEditor?a.activeEditor.execCommand(e,t,n):!1},execInstanceCommand:function(e,t,n,i){var r=this.get(e);return r?r.execCommand(t,n,i):!1},triggerSave:function(){e(this.editors,function(e){e.save()})},addI18n:function(t,n){var i=this.i18n;tinymce.is(t,"string")?e(n,function(e,n){i[t+"."+n]=e}):e(t,function(t,n){e(t,function(t,r){e(t,function(e,t){"common"===r?i[n+"."+t]=e:i[n+"."+r+"."+t]=e})})})},_setActive:function(e){this.selectedInstance=this.activeEditor=e}}),tinymce.EditorManager.preInit()}();var tinyMCE=window.tinyMCE=tinymce.EditorManager;!function(){var e=tinymce.DOM,t=tinymce.dom.Event,n=tinymce.extend,i=tinymce.util.Dispatcher,r=tinymce.each,a=tinymce.isGecko,o=tinymce.isIE,s=tinymce.isWebKit,c=tinymce.is,l=tinymce.ThemeManager,u=tinymce.PluginManager,d=tinymce.EditorManager,f=(tinymce.inArray,tinymce.grep,tinymce.explode);tinymce.create("tinymce.Editor",{Editor:function(e,t){var a=this;a.id=a.editorId=e,a.execCommands={},a.queryStateCommands={},a.queryValueCommands={},a.plugins={},r(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(e){a[e]=new i(a)}),a.settings=t=n({id:e,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:tinymce.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">',visual_table_class:"mceItemTable",visual:1,inline_styles:!0,convert_fonts_to_spans:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",valid_elements:"@[id|class|style|title|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class|onfocus|onblur],strong/b,em/i,strike,u,#p[align],-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote[cite],-table[border=0|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value],embed[type|width|height|src|*],script[src|type],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value|tabindex|accesskey],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1},t),a.documentBaseURI=new tinymce.util.URI(t.document_base_url||tinymce.documentBaseURL,{base_uri:tinyMCE.baseURI}),a.baseURI=d.baseURI,a.execCallback("setup",a)},render:function(n){function i(){o.language&&h.add(tinymce.baseURL+"/langs/"+o.language+".js"),"-"==o.theme.charAt(0)||l.urls[o.theme]||l.load(o.theme,"themes/"+o.theme+"/editor_template"+tinymce.suffix+".js"),r(f(o.plugins),function(e){if(e&&"-"!=e.charAt(0)&&!u.urls[e]){if(!s&&"safari"==e)return;u.load(e,"plugins/"+e+"/editor_plugin"+tinymce.suffix+".js")}}),h.loadQueue(function(){function e(){window.setTimeout(function(){t.remove(a.id,"focus",e),a.windowManager.confirm(a.getLang("edit_confirm"),function(e){e&&a.init()})},0)}return o.ask?(t.add(a.id,"focus",e),void 0):(a.removed||a.init(),void 0)})}var a=this,o=a.settings,c=a.id,h=tinymce.ScriptLoader;return t.domLoaded?(n||(o.strict_loading_mode=1,tinyMCE.settings=o),a.getElement()&&(o.strict_loading_mode&&(h.settings.strict_mode=o.strict_loading_mode,tinymce.DOM.settings.strict=1),!/TEXTAREA|INPUT/i.test(a.getElement().nodeName)&&o.hidden_input&&e.getParent(c,"form")&&e.insertAfter(e.create("input",{type:"hidden",name:c}),c),a.windowManager=new tinymce.WindowManager(a),"xml"==o.encoding&&a.onGetContent.add(function(t,n){n.save&&(n.content=e.encode(n.content))}),o.add_form_submit_trigger&&a.onSubmit.addToTop(function(){a.initialized&&(a.save(),a.isNotDirty=1)}),o.add_unload_trigger&&!o.ask&&(a._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!a.initialized||a.destroyed||a.isHidden()||a.save({format:"raw",no_events:!0})})),tinymce.addUnload(a.destroy,a),o.submit_patch&&a.onBeforeRenderUI.add(function(){var e=a.getElement().form;e&&(e._mceOldSubmit||(e.submit.nodeType||e.submit.length||(a.formElement=e,e._mceOldSubmit=e.submit,e.submit=function(){return d.triggerSave(),a.isNotDirty=1,this._mceOldSubmit(this)}),e=null))}),-1!=o.plugins.indexOf("compat2x")?(u.load("compat2x","plugins/compat2x/editor_plugin"+tinymce.suffix+".js"),h.loadQueue(i)):i()),void 0):(t.add(document,"init",function(){a.render()}),void 0)},init:function(){function n(e,t){t&&t.initial||y.execCommand("mceRepaint")}var i,s,c,h,p,m,g,v,y=this,b=y.settings,x=y.getElement();d.add(y),b.theme=b.theme.replace(/-/,""),h=l.get(b.theme),y.theme=new h,y.theme.init&&b.init_theme&&y.theme.init(y,l.urls[b.theme]||tinymce.documentBaseURL.replace(/\/$/,"")),r(f(b.plugins.replace(/\-/g,"")),function(e){var t,n=u.get(e),i=u.urls[e]||tinymce.documentBaseURL.replace(/\/$/,"");n&&(t=new n(y,i),y.plugins[e]=t,t.init&&t.init(y,i))}),b.popup_css!==!1&&(b.popup_css=b.popup_css?y.documentBaseURI.toAbsolute(b.popup_css):y.baseURI.toAbsolute("themes/"+b.theme+"/skins/"+b.skin+"/dialog.css")),b.popup_css_add&&(b.popup_css+=","+y.documentBaseURI.toAbsolute(b.popup_css_add)),y.controlManager=new tinymce.ControlManager(y),y.undoManager=new tinymce.UndoManager(y),y.undoManager.onAdd.add(function(e,t){return t.initial?void 0:y.onChange.dispatch(y,t,e)}),y.undoManager.onUndo.add(function(e,t){return y.onUndo.dispatch(y,t,e)}),y.undoManager.onRedo.add(function(e,t){return y.onRedo.dispatch(y,t,e)}),b.custom_undo_redo&&y.onExecCommand.add(function(e,t,n,i,r){"Undo"==t||"Redo"==t||"mceRepaint"==t||r&&r.skip_undo||y.undoManager.add()}),y.onExecCommand.add(function(e,t){/^(FontName|FontSize)$/.test(t)||y.nodeChanged()}),a&&(y.onUndo.add(n),y.onRedo.add(n),y.onSetContent.add(n)),y.onBeforeRenderUI.dispatch(y,y.controlManager),b.render_ui&&(s=b.width||x.style.width||x.offsetWidth,c=b.height||x.style.height||x.offsetHeight,y.orgDisplay=x.style.display,v=/^[0-9\.]+(|px)$/i,v.test(""+s)&&(s=Math.max(parseInt(s)+(h.deltaWidth||0),100)),v.test(""+c)&&(c=Math.max(parseInt(c)+(h.deltaHeight||0),100)),h=y.theme.renderUI({targetNode:x,width:s,height:c,deltaWidth:b.delta_width,deltaHeight:b.delta_height}),y.editorContainer=h.editorContainer),e.setStyles(h.sizeContainer||h.editorContainer,{width:s,height:c}),c=(h.iframeHeight||c)+("number"==typeof c?h.deltaHeight||0:""),100>c&&(c=100),y.iframeHTML=b.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml"><base href="'+y.documentBaseURI.getURI()+'" />',y.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',tinymce.relaxedDomain&&(y.iframeHTML+='<script type="text/javascript">document.domain = "'+tinymce.relaxedDomain+'";</script>'),m=b.body_id||"tinymce",-1!=m.indexOf("=")&&(m=y.getParam("body_id","","hash"),m=m[y.id]||m),g=b.body_class||"",-1!=g.indexOf("=")&&(g=y.getParam("body_class","","hash"),g=g[y.id]||""),y.iframeHTML+='</head><body id="'+m+'" class="mceContentBody '+g+'"></body></html>',tinymce.relaxedDomain&&(o||tinymce.isOpera&&parseFloat(opera.version())>=9.5?p='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+y.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()':tinymce.isOpera&&(p='javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();ed.setupIframe();})()')),i=e.add(h.iframeContainer,"iframe",{id:y.id+"_ifr",src:p||'javascript:""',frameBorder:"0",style:{width:"100%",height:c}}),y.contentAreaContainer=h.iframeContainer,e.get(h.editorContainer).style.display=y.orgDisplay,e.get(y.id).style.display="none",tinymce.isOldWebKit?(t.add(i,"load",y.setupIframe,y),i.src=tinymce.baseURL+"/plugins/safari/blank.htm"):(o&&tinymce.relaxedDomain||y.setupIframe(),x=i=h=null)},setupIframe:function(){function n(e,t){r(f(c.custom_elements),function(e){var n;0===e.indexOf("~")?(e=e.substring(1),n="span"):n="div",t.content=t.content.replace(new RegExp("<("+e+")([^>]*)>","g"),"<"+n+' mce_name="$1"$2>'),t.content=t.content.replace(new RegExp("</("+e+")>","g"),"</"+n+">")})}var i,s=this,c=s.settings,l=e.get(s.id),u=s.getDoc();if(o&&tinymce.relaxedDomain||(u.open(),u.write(s.iframeHTML),u.close()),!o)try{c.readonly||(u.designMode="On")}catch(h){}if(o&&(i=s.getBody(),e.hide(i),c.readonly||(i.contentEditable=!0),e.show(i)),s.dom=new tinymce.DOM.DOMUtils(s.getDoc(),{keep_values:!0,url_converter:s.convertURL,url_converter_scope:s,hex_colors:c.force_hex_style_colors,class_filter:c.class_filter,update_styles:1,fix_ie_paragraphs:1}),s.serializer=new tinymce.dom.Serializer({entity_encoding:c.entity_encoding,entities:c.entities,valid_elements:c.verify_html===!1?"*[*]":c.valid_elements,extended_valid_elements:c.extended_valid_elements,valid_child_elements:c.valid_child_elements,invalid_elements:c.invalid_elements,fix_table_elements:c.fix_table_elements,fix_list_elements:c.fix_list_elements,fix_content_duplication:c.fix_content_duplication,convert_fonts_to_spans:c.convert_fonts_to_spans,font_size_classes:c.font_size_classes,font_size_style_values:c.font_size_style_values,apply_source_formatting:c.apply_source_formatting,remove_linebreaks:c.remove_linebreaks,element_format:c.element_format,dom:s.dom}),s.selection=new tinymce.dom.Selection(s.dom,s.getWin(),s.serializer),s.forceBlocks=new tinymce.ForceBlocks(s,{forced_root_block:c.forced_root_block}),s.editorCommands=new tinymce.EditorCommands(s),s.serializer.onPreProcess.add(function(e,t){return s.onPreProcess.dispatch(s,t,e)}),s.serializer.onPostProcess.add(function(e,t){return s.onPostProcess.dispatch(s,t,e)}),s.onPreInit.dispatch(s),c.gecko_spellcheck||(s.getBody().spellcheck=0),c.readonly||s._addEvents(),s.controlManager.onPostRender.dispatch(s,s.controlManager),s.onPostRender.dispatch(s),c.directionality&&(s.getBody().dir=c.directionality),c.nowrap&&(s.getBody().style.whiteSpace="nowrap"),c.auto_resize&&s.onNodeChange.add(s.resizeToContent,s),c.custom_elements&&(s.onBeforeSetContent.add(n),s.onPostProcess.add(function(e,t){t.set&&n(e,t)})),c.handle_node_change_callback&&s.onNodeChange.add(function(e,t,n){s.execCallback("handle_node_change_callback",s.id,n,-1,-1,!0,s.selection.isCollapsed())}),c.save_callback&&s.onSaveContent.add(function(e,t){var n=s.execCallback("save_callback",s.id,t.content,s.getBody());n&&(t.content=n)}),c.onchange_callback&&s.onChange.add(function(e,t){s.execCallback("onchange_callback",s,t)}),c.convert_newlines_to_brs&&s.onBeforeSetContent.add(function(e,t){t.initial&&(t.content=t.content.replace(/\r?\n/g,"<br />"))}),c.fix_nesting&&o&&s.onBeforeSetContent.add(function(e,t){t.content=s._fixNesting(t.content)}),c.preformatted&&s.onPostProcess.add(function(e,t){t.content=t.content.replace(/^\s*<pre.*?>/,""),t.content=t.content.replace(/<\/pre>\s*$/,""),t.set&&(t.content='<pre class="mceItemHidden">'+t.content+"</pre>")}),c.verify_css_classes&&(s.serializer.attribValueFilter=function(e,t){var n,i;return"class"==e?(s.classesRE||(i=s.dom.getClasses(),i.length>0&&(n="",r(i,function(e){n+=(n?"|":"")+e["class"]}),s.classesRE=new RegExp("("+n+")","gi"))),!s.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(t)||s.classesRE.test(t)?t:""):t}),c.convert_fonts_to_spans&&s._convertFonts(),c.inline_styles&&s._convertInlineElements(),c.cleanup_callback&&(s.onBeforeSetContent.add(function(e,t){t.content=s.execCallback("cleanup_callback","insert_to_editor",t.content,t)
}),s.onPreProcess.add(function(e,t){t.set&&s.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t),t.get&&s.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}),s.onPostProcess.add(function(e,t){t.set&&(t.content=s.execCallback("cleanup_callback","insert_to_editor",t.content,t)),t.get&&(t.content=s.execCallback("cleanup_callback","get_from_editor",t.content,t))})),c.save_callback&&s.onGetContent.add(function(e,t){t.save&&(t.content=s.execCallback("save_callback",s.id,t.content,s.getBody()))}),c.handle_event_callback&&s.onEvent.add(function(e,n,i){s.execCallback("handle_event_callback",n,e,i)===!1&&t.cancel(n)}),s.onSetContent.add(function(){s.addVisual(s.getBody())}),c.padd_empty_editor&&s.onPostProcess.add(function(e,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),a&&!c.readonly)try{u.designMode="Off",u.designMode="On"}catch(h){}setTimeout(function(){s.removed||(s.load({initial:!0,format:c.cleanup_on_startup?"html":"raw"}),s.startContent=s.getContent({format:"raw"}),s.undoManager.add({initial:!0}),s.initialized=!0,s.onInit.dispatch(s),s.execCallback("setupcontent_callback",s.id,s.getBody(),s.getDoc()),s.execCallback("init_instance_callback",s),s.focus(!0),s.nodeChanged({initial:1}),c.content_css&&tinymce.each(f(c.content_css),function(e){s.dom.loadCSS(s.documentBaseURI.toAbsolute(e))}),c.auto_focus&&setTimeout(function(){var e=d.get(c.auto_focus);e.selection.select(e.getBody(),1),e.selection.collapse(1),e.getWin().focus()},100))},1),l=null},focus:function(e){var t,n=this,i=n.settings.content_editable;e||i||o&&n.selection.getNode().ownerDocument==n.getDoc()||n.getWin().focus(),d.activeEditor!=n&&(null!=(t=d.activeEditor)&&t.onDeactivate.dispatch(t,n),n.onActivate.dispatch(n,t)),d._setActive(n)},execCallback:function(e){var t,n=this,i=n.settings[e];if(i)return n.callbackLookup&&(t=n.callbackLookup[e])&&(i=t.func,t=t.scope),c(i,"string")&&(t=i.replace(/\.\w+$/,""),t=t?tinymce.resolve(t):0,i=tinymce.resolve(i),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[e]={func:i,scope:t}),i.apply(t||n,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",n=d.i18n;return e?n[t+"."+e]||e.replace(/{\#([^}]+)\}/g,function(e,i){return n[t+"."+i]||"{#"+i+"}"}):""},getLang:function(e,t){return d.i18n[(this.settings.language||"en")+"."+e]||(c(t)?t:"{#"+e+"}")},getParam:function(e,t,n){var i,a=tinymce.trim,o=c(this.settings[e])?this.settings[e]:t;return"hash"===n?(i={},c(o,"string")?r(o.indexOf("=")>0?o.split(/[;,](?![^=;,]*(?:[;,]|$))/):o.split(","),function(e){e=e.split("="),i[a(e[0])]=e.length>1?a(e[1]):a(e)}):i=o,i):o},nodeChanged:function(e){var t=this,n=t.selection,i=n.getNode()||t.getBody();t.initialized&&t.onNodeChange.dispatch(t,e?e.controlManager||t.controlManager:t.controlManager,o&&i.ownerDocument!=t.getDoc()?t.getBody():i,n.isCollapsed(),e)},addButton:function(e,t){var n=this;n.buttons=n.buttons||{},n.buttons[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,i){var a,o=this;return o.settings.custom_shortcuts?(o.shortcuts=o.shortcuts||{},c(n,"string")&&(a=n,n=function(){o.execCommand(a,!1,null)}),c(n,"object")&&(a=n,n=function(){o.execCommand(a[0],a[1],a[2])}),r(f(e),function(e){var a={func:n,scope:i||this,desc:t,alt:!1,ctrl:!1,shift:!1};r(f(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":a[e]=!0;break;default:a.charCode=e.charCodeAt(0),a.keyCode=e.toUpperCase().charCodeAt(0)}}),o.shortcuts[(a.ctrl?"ctrl":"")+","+(a.alt?"alt":"")+","+(a.shift?"shift":"")+","+a.keyCode]=a}),!0):!1},execCommand:function(e,t,n,i){var a,o,s=this,c=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(e)||i&&i.skip_focus||s.focus(),a={},s.onBeforeExecCommand.dispatch(s,e,t,n,a),a.terminate?!1:s.execCallback("execcommand_callback",s.id,s.selection.getNode(),e,t,n)?(s.onExecCommand.dispatch(s,e,t,n,i),!0):(a=s.execCommands[e])&&(o=a.func.call(a.scope,t,n),o!==!0)?(s.onExecCommand.dispatch(s,e,t,n,i),o):(r(s.plugins,function(r){return r.execCommand&&r.execCommand(e,t,n)?(s.onExecCommand.dispatch(s,e,t,n,i),c=1,!1):void 0}),c?!0:s.theme.execCommand&&s.theme.execCommand(e,t,n)?(s.onExecCommand.dispatch(s,e,t,n,i),!0):s.editorCommands.execCommand(e,t,n)?(s.onExecCommand.dispatch(s,e,t,n,i),!0):(s.getDoc().execCommand(e,t,n),s.onExecCommand.dispatch(s,e,t,n,i),void 0))},queryCommandState:function(e){var t,n,i=this;if(!i._isHidden()){if((t=i.queryStateCommands[e])&&(n=t.func.call(t.scope),n!==!0))return n;if(t=i.editorCommands.queryCommandState(e),-1!==t)return t;try{return this.getDoc().queryCommandState(e)}catch(r){}}},queryCommandValue:function(e){var t,n,i=this;if(!i._isHidden()){if((t=i.queryValueCommands[e])&&(n=t.func.call(t.scope),n!==!0))return n;if(t=i.editorCommands.queryCommandValue(e),c(t))return t;try{return this.getDoc().queryCommandValue(e)}catch(r){}}},show:function(){var t=this;e.show(t.getContainer()),e.hide(t.id),t.load()},hide:function(){var t=this,n=t.getDoc();o&&n&&n.execCommand("SelectAll"),t.save(),e.hide(t.getContainer()),e.setStyle(t.id,"display",t.orgDisplay)},isHidden:function(){return!e.isHidden(this.id)},setProgressState:function(e,t,n){return this.onSetProgressState.dispatch(this,e,t,n),e},resizeToContent:function(){var t=this;e.setStyle(t.id+"_ifr","height",t.getBody().scrollHeight)},load:function(e){var t,n=this,i=n.getElement();return i?(e=e||{},e.load=!0,t=n.setContent(c(i.value)?i.value:i.innerHTML,e),e.element=i,e.no_events||n.onLoadContent.dispatch(n,e),e.element=i=null,t):void 0},save:function(t){var n,i,a=this,o=a.getElement();if(o&&a.initialized)return t=t||{},t.save=!0,t.no_events||(a.undoManager.typing=0,a.undoManager.add()),t.element=o,n=t.content=a.getContent(t),t.no_events||a.onSaveContent.dispatch(a,t),n=t.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=n:(o.innerHTML=n,(i=e.getParent(a.id,"form"))&&r(i.elements,function(e){return e.name==a.id?(e.value=n,!1):void 0})),t.element=o=null,n},setContent:function(e,t){var n=this;return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||n.onBeforeSetContent.dispatch(n,t),tinymce.isIE||0!==e.length&&!/^\s+$/.test(e)||(t.content=n.dom.setHTML(n.getBody(),'<br mce_bogus="1" />'),t.format="raw"),t.content=n.dom.setHTML(n.getBody(),tinymce.trim(t.content)),"raw"!=t.format&&n.settings.cleanup&&(t.getInner=!0,t.content=n.dom.setHTML(n.getBody(),n.serializer.serialize(n.getBody(),t))),t.no_events||n.onSetContent.dispatch(n,t),t.content},getContent:function(e){var t,n=this;return e=e||{},e.format=e.format||"html",e.get=!0,e.no_events||n.onBeforeGetContent.dispatch(n,e),"raw"!=e.format&&n.settings.cleanup?(e.getInner=!0,t=n.serializer.serialize(n.getBody(),e)):t=n.getBody().innerHTML,t=t.replace(/^\s*|\s*$/g,""),e.content=t,e.no_events||n.onGetContent.dispatch(n,e),e.content},isDirty:function(){var e=this;return tinymce.trim(e.startContent)!=tinymce.trim(e.getContent({format:"raw",no_events:1}))&&!e.isNotDirty},getContainer:function(){var t=this;return t.container||(t.container=e.get(t.editorContainer||t.id+"_parent")),t.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return e.get(this.settings.content_element||this.id)},getWin:function(){var t,n=this;return n.contentWindow||(t=e.get(n.id+"_ifr"),t&&(n.contentWindow=t.contentWindow)),n.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin(),e&&(t.contentDocument=e.document)),t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var i=this,r=i.settings;return r.urlconverter_callback?i.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")?e:r.relative_urls?i.documentBaseURI.toRelative(e):e=i.documentBaseURI.toAbsolute(e,r.remove_script_host)},addVisual:function(e){var t=this,n=t.settings;e=e||t.getBody(),c(t.hasVisual)||(t.hasVisual=n.visual),r(t.dom.select("table,a",e),function(e){var i;switch(e.nodeName){case"TABLE":return i=t.dom.getAttrib(e,"border"),i&&"0"!=i||(t.hasVisual?t.dom.addClass(e,n.visual_table_class):t.dom.removeClass(e,n.visual_table_class)),void 0;case"A":return i=t.dom.getAttrib(e,"name"),i&&(t.hasVisual?t.dom.addClass(e,"mceItemAnchor"):t.dom.removeClass(e,"mceItemAnchor")),void 0}}),t.onVisualAid.dispatch(t,e,t.hasVisual)},remove:function(){var t=this,n=t.getContainer();t.removed=1,t.hide(),t.execCallback("remove_instance_callback",t),t.onRemove.dispatch(t),t.onExecCommand.listeners=[],d.remove(t),e.remove(n)},destroy:function(e){var n=this;n.destroyed||(e||(tinymce.removeUnload(n.destroy),tinyMCE.onBeforeUnload.remove(n._beforeUnload),n.theme.destroy&&n.theme.destroy(),n.controlManager.destroy(),n.selection.destroy(),n.dom.destroy(),n.settings.content_editable||(t.clear(n.getWin()),t.clear(n.getDoc())),t.clear(n.getBody()),t.clear(n.formElement)),n.formElement&&(n.formElement.submit=n.formElement._mceOldSubmit,n.formElement._mceOldSubmit=null),n.contentAreaContainer=n.formElement=n.container=n.settings.content_element=n.bodyElement=n.contentDocument=n.contentWindow=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),n.destroyed=1)},_addEvents:function(){function n(e,t){e.type;h.removed||h.onEvent.dispatch(h,e,t)!==!1&&h[m[e.fakeType||e.type]].dispatch(h,e,t)}function i(){var e=this,t=e.getDoc(),n=e.settings;if(a&&!n.readonly){if(e._isHidden())try{n.content_editable||(t.designMode="On")}catch(i){}try{t.execCommand("styleWithCSS",0,!1)}catch(i){if(!e._isHidden())try{t.execCommand("useCSS",0,!0)}catch(i){}}if(!n.table_inline_editing)try{t.execCommand("enableInlineTableEditing",!1,!1)}catch(i){}if(!n.object_resizing)try{t.execCommand("enableObjectResizing",!1,!1)}catch(i){}}}function o(e,n){return 9===n.keyCode?t.cancel(n):void 0}function s(n,i){function a(t){if(c=e.getParent(n.id,"form"),l=c.elements,c)if(r(l,function(e,t){return e.id==n.id?(o=t,!1):void 0}),t>0){for(s=o+1;s<l.length;s++)if("hidden"!=l[s].type)return l[s]}else for(s=o-1;s>=0;s--)if("hidden"!=l[s].type)return l[s];return null}var o,s,c,l,u;return 9===i.keyCode&&(u=f(n.getParam("tab_focus")),1==u.length&&(u[1]=u[0],u[0]=":prev"),l=i.shiftKey?":prev"==u[0]?a(-1):e.get(u[0]):":next"==u[1]?a(1):e.get(u[1]))?((n=d.get(l.id||l.name))?n.focus():window.setTimeout(function(){window.focus(),l.focus()},10),t.cancel(i)):void 0}function c(e){var t=null;return e.altKey||e.ctrlKey||e.metaKey?(r(h.shortcuts,function(n){return tinymce.isMac&&n.ctrl!=e.metaKey||!tinymce.isMac&&n.ctrl!=e.ctrlKey||n.alt!=e.altKey||n.shift!=e.shiftKey?void 0:e.keyCode==n.keyCode||e.charCode&&e.charCode==n.charCode?(t=n,!1):void 0}),t):t}function l(){h.undoManager.typing=0,h.undoManager.add()}var u,h=this,p=h.settings,m={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};if(r(m,function(i,r){switch(r){case"contextmenu":tinymce.isOpera?t.add(h.getBody(),"mousedown",function(e){e.ctrlKey&&(e.fakeType="contextmenu",n(e))}):t.add(h.getBody(),r,n);break;case"paste":t.add(h.getBody(),r,function(e){var t,i;e.clipboardData?t=e.clipboardData.getData("text/plain"):tinymce.isIE&&(t=h.getWin().clipboardData.getData("Text")),n(e,{text:t,html:i})});break;case"submit":case"reset":t.add(h.getElement().form||e.getParent(h.id,"form"),r,n);break;default:t.add(p.content_editable?h.getBody():h.getDoc(),r,n)}}),t.add(p.content_editable?h.getBody():a?h.getDoc():h.getWin(),"focus",function(){h.focus(!0)}),tinymce.isGecko&&t.add(h.getDoc(),"DOMNodeInserted",function(e){var t;e=e.target,1===e.nodeType&&"IMG"===e.nodeName&&(t=e.getAttribute("mce_src"))&&(e.src=h.documentBaseURI.toAbsolute(t))}),a&&(h.onBeforeExecCommand.add(i),h.onMouseDown.add(i)),h.onMouseUp.add(h.nodeChanged),h.onClick.add(h.nodeChanged),h.onKeyUp.add(function(e,t){var n=t.keyCode;(n>=33&&36>=n||n>=37&&40>=n||13==n||45==n||46==n||8==n||tinymce.isMac&&(91==n||93==n)||t.ctrlKey)&&h.nodeChanged()}),h.onReset.add(function(){h.setContent(h.startContent,{format:"raw"})}),h.getParam("tab_focus")&&(h.onKeyUp.add(o),a?(h.onKeyPress.add(s),h.onKeyDown.add(o)):h.onKeyDown.add(s)),p.custom_shortcuts){for(p.custom_undo_redo_keyboard_shortcuts&&(h.addShortcut("ctrl+z",h.getLang("undo_desc"),"Undo"),h.addShortcut("ctrl+y",h.getLang("redo_desc"),"Redo")),a&&(h.addShortcut("ctrl+b",h.getLang("bold_desc"),"Bold"),h.addShortcut("ctrl+i",h.getLang("italic_desc"),"Italic"),h.addShortcut("ctrl+u",h.getLang("underline_desc"),"Underline")),u=1;6>=u;u++)h.addShortcut("ctrl+"+u,"",["FormatBlock",!1,"<h"+u+">"]);h.addShortcut("ctrl+7","",["FormatBlock",!1,"<p>"]),h.addShortcut("ctrl+8","",["FormatBlock",!1,"<div>"]),h.addShortcut("ctrl+9","",["FormatBlock",!1,"<address>"]),h.onKeyUp.add(function(e,n){var i=c(n);return i?t.cancel(n):void 0}),h.onKeyPress.add(function(e,n){var i=c(n);return i?t.cancel(n):void 0}),h.onKeyDown.add(function(e,n){var i=c(n);return i?(i.func.call(i.scope),t.cancel(n)):void 0})}tinymce.isIE&&(t.add(h.getDoc(),"controlselect",function(e){var n,i=h.resizeInfo;e=e.target,"IMG"===e.nodeName&&(i&&t.remove(i.node,i.ev,i.cb),h.dom.hasClass(e,"mceItemNoResize")?(ev="resizestart",n=t.add(e,"resizestart",t.cancel,t)):(ev="resizeend",n=t.add(e,ev,function(e){var t;e=e.target,(t=h.dom.getStyle(e,"width"))&&(h.dom.setAttrib(e,"width",t.replace(/[^0-9%]+/g,"")),h.dom.setStyle(e,"width","")),(t=h.dom.getStyle(e,"height"))&&(h.dom.setAttrib(e,"height",t.replace(/[^0-9%]+/g,"")),h.dom.setStyle(e,"height",""))})),i=h.resizeInfo={node:e,ev:ev,cb:n})}),h.onKeyDown.add(function(e,n){switch(n.keyCode){case 8:if(h.selection.getRng().item)return h.selection.getRng().item(0).removeNode(),t.cancel(n)}})),tinymce.isOpera&&h.onClick.add(function(e,n){t.prevent(n)}),p.custom_undo_redo&&(tinymce.isIE?t.add(h.getWin(),"blur",function(){var e;h.selection&&(e=h.selection.getNode(),!h.removed&&e.ownerDocument&&e.ownerDocument!=h.getDoc()&&l())}):t.add(h.getDoc(),"blur",function(){h.selection&&!h.removed&&l()}),h.onMouseDown.add(l),h.onKeyUp.add(function(e,t){(t.keyCode>=33&&t.keyCode<=36||t.keyCode>=37&&t.keyCode<=40||13==t.keyCode||45==t.keyCode||t.ctrlKey)&&(h.undoManager.typing=0,h.undoManager.add())}),h.onKeyDown.add(function(e,t){return t.keyCode>=33&&t.keyCode<=36||t.keyCode>=37&&t.keyCode<=40||13==t.keyCode||45==t.keyCode?(h.undoManager.typing&&(h.undoManager.add(),h.undoManager.typing=0),void 0):(h.undoManager.typing||(h.undoManager.add(),h.undoManager.typing=1),void 0)}))},_convertInlineElements:function(){function e(e,c){o.inline_styles&&(c.get?r(a.dom.select("table,u,strike",c.node),function(e){switch(e.nodeName){case"TABLE":(t=s.getAttrib(e,"height"))&&(s.setStyle(e,"height",t),s.setAttrib(e,"height",""));break;case"U":case"STRIKE":e.style.textDecoration="U"==e.nodeName?"underline":"line-through",s.setAttrib(e,"mce_style",""),s.setAttrib(e,"mce_name","span")}}):c.set&&r(a.dom.select("table,span",c.node).reverse(),function(e){"TABLE"==e.nodeName?(t=s.getStyle(e,"height"))&&s.setAttrib(e,"height",t.replace(/[^0-9%]+/g,"")):(i="underline"==e.style.textDecoration?"u":"line-through"==e.style.textDecoration?"strike":"",i&&(e.style.textDecoration="",s.setAttrib(e,"mce_style",""),n=s.create(i,{style:s.getAttrib(e,"style")}),s.replace(n,e,1)))}))}var t,n,i,a=this,o=a.settings,s=a.dom;a.onPreProcess.add(e),o.cleanup_on_startup||a.onSetContent.add(function(t,n){n.initial&&e(a,{node:a.getBody(),set:1})})},_convertFonts:function(){function e(e){var t,n,c,l;if(o.inline_styles)for(c=a.dom.select("font",e),l=c.length-1;l>=0;l--)t=c[l],n=s.create("span",{style:s.getAttrib(t,"style"),"class":s.getAttrib(t,"class")}),s.setStyles(n,{fontFamily:s.getAttrib(t,"face"),color:s.getAttrib(t,"color"),backgroundColor:t.style.backgroundColor}),t.size&&(i?s.setStyle(n,"fontSize",i[parseInt(t.size)-1]):s.setAttrib(n,"class",r[parseInt(t.size)-1])),s.setAttrib(n,"mce_style",""),s.replace(n,t,1)}var t,n,i,r,a=this,o=a.settings,s=a.dom;o.inline_styles&&(t=[8,10,12,14,18,24,36],n=["xx-small","x-small","small","medium","large","x-large","xx-large"],(i=o.font_size_style_values)&&(i=f(i)),(r=o.font_size_classes)&&(r=f(r)),a.onPreProcess.add(function(t,n){n.get&&e(n.node)}),a.onSetContent.add(function(t,n){n.initial&&e(n.node)}))},_isHidden:function(){var e;return a?(e=this.selection.getSel(),!e||!e.rangeCount||0==e.rangeCount):0},_fixNesting:function(e){var t,n=[];for(e=e.replace(/<(\/)?([^\s>]+)[^>]*?>/g,function(e,i,r){if("/"===i){if(!n.length)return"";if(r!==n[n.length-1].tag){for(t=n.length-1;t>=0;t--)if(n[t].tag===r){n[t].close=1;break}return""}n.pop(),n.length&&n[n.length-1].close&&(e=e+"</"+n[n.length-1].tag+">",n.pop())}else{if(/^(br|hr|input|meta|img|link|param)$/i.test(r))return e;if(/\/>$/.test(e))return e;n.push({tag:r})}return e}),t=n.length-1;t>=0;t--)e+="</"+n[t].tag+">";return e}})}(),function(){function e(e){return/^(H[1-6]|HR|P|DIV|ADDRESS|PRE|FORM|TABLE|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP)$/.test(e.nodeName)}var t=tinymce.each,n=tinymce.isIE,i=tinymce.isGecko,r=tinymce.isOpera,a=tinymce.isWebKit;tinymce.create("tinymce.EditorCommands",{EditorCommands:function(e){this.editor=e},execCommand:function(e,t,n){var r,a=this,o=a.editor;switch(e){case"Cut":case"Copy":case"Paste":try{o.getDoc().execCommand(e,t,n)}catch(s){i?o.windowManager.confirm(o.getLang("clipboard_msg"),function(e){e&&window.open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","mceExternal")}):o.windowManager.alert(o.getLang("clipboard_no_support"))}return!0;case"mceResetDesignMode":case"mceBeginUndoLevel":return!0;case"unlink":return a.UnLink(),!0;case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":return a.mceJustify(e,e.substring(7).toLowerCase()),!0;case"mceEndUndoLevel":case"mceAddUndoLevel":return o.undoManager.add(),!0;default:if(r=this[e])return r.call(this,t,n),!0}return!1},Indent:function(){var e,i,r=this.editor,a=r.dom,o=r.selection;return e=r.settings.indentation,i=/[a-z%]+$/i.exec(e),e=parseInt(e),!r.settings.inline_styles||this.queryStateInsertUnorderedList()||this.queryStateInsertOrderedList()?(r.getDoc().execCommand("Indent",!1,null),n&&a.getParent(o.getNode(),function(e){"BLOCKQUOTE"==e.nodeName&&(e.dir=e.style.cssText="")}),void 0):(t(this._getSelectedBlocks(),function(t){a.setStyle(t,"paddingLeft",parseInt(t.style.paddingLeft||0)+e+i)}),void 0)},Outdent:function(){{var e,n,i,r=this.editor,a=r.dom;r.selection}return n=r.settings.indentation,i=/[a-z%]+$/i.exec(n),n=parseInt(n),!r.settings.inline_styles||this.queryStateInsertUnorderedList()||this.queryStateInsertOrderedList()?(r.getDoc().execCommand("Outdent",!1,null),void 0):(t(this._getSelectedBlocks(),function(t){e=Math.max(0,parseInt(t.style.paddingLeft||0)-n),a.setStyle(t,"paddingLeft",e?e+i:"")}),void 0)},mceSetAttribute:function(e,t){var n,i=this.editor,r=i.dom;(n=r.getParent(i.selection.getNode(),r.isBlock))&&r.setAttrib(n,t.name,t.value)},mceSetContent:function(e,t){this.editor.setContent(t)},mceToggleVisualAid:function(){var e=this.editor;e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(e,t){var n=this.editor.selection;n.setContent(t.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,n){function i(e){t(n,function(t,n){r.dom.setAttrib(e,n,t)})}var r=this.editor,a=r.selection,o=r.dom.getParent(a.getNode(),"A");tinymce.is(n,"string")&&(n={href:n}),o?n.href?i(o):r.dom.remove(o,1):(r.execCommand("CreateLink",!1,"javascript:mctmp(0);"),t(r.dom.select("a"),function(e){"javascript:mctmp(0);"==e.href&&i(e)}))},UnLink:function(){var e=this.editor,t=e.selection;t.isCollapsed()&&t.select(t.getNode()),e.getDoc().execCommand("unlink",!1,null),t.collapse(0)},FontName:function(e,t){var n=this,i=n.editor,r=i.selection;t?i.settings.convert_fonts_to_spans?n._applyInlineStyle("span",{style:{fontFamily:t}}):i.getDoc().execCommand("FontName",!1,t):(r.isCollapsed()&&r.select(r.getNode()),n.RemoveFormat())},FontSize:function(e,t){var n,i,r=this.editor,a=r.settings;a.convert_fonts_to_spans&&t>=1&&7>=t&&(i=tinymce.explode(a.font_size_style_values),n=tinymce.explode(a.font_size_classes),t=n?n[t-1]||t:i[t-1]||t),t>=1&&7>=t?r.getDoc().execCommand("FontSize",!1,t):this._applyInlineStyle("span",{style:{fontSize:t}})},queryCommandValue:function(e){var t=this["queryValue"+e];return t?t.call(this,e):!1},queryCommandState:function(e){var t;switch(e){case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":return this.queryStateJustify(e,e.substring(7).toLowerCase());default:if(t=this["queryState"+e])return t.call(this,e)}return-1},_queryState:function(e){try{return this.editor.getDoc().queryCommandState(e)}catch(t){}},_queryVal:function(e){try{return this.editor.getDoc().queryCommandValue(e)}catch(t){}},queryValueFontSize:function(){var e,t=this.editor,n=0;return(e=t.dom.getParent(t.selection.getNode(),"SPAN"))&&(n=e.style.fontSize),n||!r&&!a?n||this._queryVal("FontSize"):((e=t.dom.getParent(t.selection.getNode(),"FONT"))&&(n=e.size),n)},queryValueFontName:function(){var e,t=this.editor,n=0;return(e=t.dom.getParent(t.selection.getNode(),"FONT"))&&(n=e.face),(e=t.dom.getParent(t.selection.getNode(),"SPAN"))&&(n=e.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n||(n=this._queryVal("FontName")),n},mceJustify:function(e,n){var i,r,a,o=this.editor,s=o.selection,c=s.getNode(),l=c.nodeName,u=o.dom;if(o.settings.inline_styles&&this.queryStateJustify(e,n)&&(a=1),i=u.getParent(c,o.dom.isBlock),"IMG"==l){if("full"==n)return;return a?("center"==n&&u.setStyle(i||c.parentNode,"textAlign",""),u.setStyle(c,"float",""),this.mceRepaint(),void 0):("center"==n?(i&&/^(TD|TH)$/.test(i.nodeName)&&(i=0),(!i||i.childNodes.length>1)&&(r=u.create("p"),r.appendChild(c.cloneNode(!1)),i?u.insertAfter(r,i):u.insertAfter(r,c),u.remove(c),c=r.firstChild,i=r),u.setStyle(i,"textAlign",n),u.setStyle(c,"float","")):(u.setStyle(c,"float",n),u.setStyle(i||c.parentNode,"textAlign","")),this.mceRepaint(),void 0)}if(o.settings.inline_styles&&o.settings.forced_root_block)return a&&(n=""),t(this._getSelectedBlocks(u.getParent(s.getStart(),u.isBlock),u.getParent(s.getEnd(),u.isBlock)),function(e){u.setAttrib(e,"align",""),u.setStyle(e,"textAlign","full"==n?"justify":n)}),void 0;if(a||o.getDoc().execCommand(e,!1,null),o.settings.inline_styles){if(a)return u.getParent(o.selection.getNode(),function(e){e.style&&e.style.textAlign&&u.setStyle(e,"textAlign","")}),void 0;t(u.select("*"),function(e){var t=e.align;t&&("full"==t&&(t="justify"),u.setStyle(e,"textAlign",t),u.setAttrib(e,"align",""))})}},mceSetCSSClass:function(e,t){this.mceSetStyleInfo(0,{command:"setattrib",name:"class",value:t})},getSelectedElement:function(){function e(e){return p.getParent(e,function(e){return 1==e.nodeType})}var t,i,r,a,o,s,c,l,u,d,f=this,h=f.editor,p=h.dom,m=h.selection,g=m.getRng();if(m.isCollapsed()||g.item)return m.getNode();if(d=h.settings.merge_styles_invalid_parents,tinymce.is(d,"string")&&(d=new RegExp(d,"i")),n){if(t=g.duplicate(),t.collapse(!0),r=t.parentElement(),i=g.duplicate(),i.collapse(!1),a=i.parentElement(),r!=a&&(t.move("character",1),r=t.parentElement()),r==a&&(t=g.duplicate(),t.moveToElementText(r),0==t.compareEndPoints("StartToStart",g)&&0==t.compareEndPoints("EndToEnd",g)))return d&&d.test(r.nodeName)?null:r}else{if(r=g.startContainer,a=g.endContainer,o=g.startOffset,s=g.endOffset,!g.collapsed&&r==a&&2>o-s&&r.hasChildNodes())return l=r.childNodes[o],d&&d.test(l.nodeName)?null:l;if(3!=r.nodeType||3!=a.nodeType)return null;if(0==o&&(l=e(r),l&&l.firstChild!=r&&(l=null)),o==r.nodeValue.length&&(c=r.nextSibling,c&&1==c.nodeType&&(l=r.nextSibling)),0==s&&(c=a.previousSibling,c&&1==c.nodeType&&(u=c)),s==a.nodeValue.length&&(u=e(a),u&&u.lastChild!=a&&(u=null)),l==u)return d&&l&&d.test(l.nodeName)?null:l}return null},InsertHorizontalRule:function(){i||n?this.editor.selection.setContent("<hr />"):this.editor.getDoc().execCommand("InsertHorizontalRule",!1,"")},RemoveFormat:function(){var e=this,t=e.editor,n=t.selection;a?n.setContent(n.getContent({format:"raw"}).replace(/(<(span|b|i|strong|em|strike) [^>]+>|<(span|b|i|strong|em|strike)>|<\/(span|b|i|strong|em|strike)>|)/g,""),{format:"raw"}):t.getDoc().execCommand("RemoveFormat",!1,null),e.mceSetStyleInfo(0,{command:"removeformat"}),t.addVisual()},mceSetStyleInfo:function(e,n){function i(e){if(1==e.nodeType)switch(n.command){case"setattrib":return d.setAttrib(e,n.name,n.value);case"setstyle":return d.setStyle(e,n.name,n.value);case"removeformat":return d.setAttrib(e,"class","")}}var r,o,s,c=this,l=c.editor,u=l.getDoc(),d=l.dom,f=l.selection,h=n.wrapper||"span",o=f.getBookmark();s=l.settings.merge_styles_invalid_parents,tinymce.is(s,"string")&&(s=new RegExp(s,"i")),(r=c.getSelectedElement())&&!l.settings.force_span_wrappers?i(r,1):(u.execCommand("FontName",!1,"__"),t(a?d.select("span"):d.select("font"),function(e){var n;("__"==d.getAttrib(e,"face")||"__"===e.style.fontFamily)&&(n=d.create(h,{mce_new:"1"}),i(n),t(e.childNodes,function(e){n.appendChild(e.cloneNode(!0))}),d.replace(n,e))})),t(d.select(h).reverse(),function(e){var t=e.parentNode;d.getAttrib(e,"mce_new")||(t=d.getParent(e,function(e){return 1==e.nodeType&&d.getAttrib(e,"mce_new")}),t&&d.remove(e,1))}),t(d.select(h).reverse(),function(e){var t=e.parentNode;if(t&&d.getAttrib(e,"mce_new")&&(!l.settings.force_span_wrappers||"SPAN"==t.nodeName))return t.nodeName==h.toUpperCase()&&1==t.childNodes.length?d.remove(t,1):(1!=e.nodeType||s&&s.test(t.nodeName)||1!=t.childNodes.length||(i(t),d.setAttrib(e,"class","")),void 0)}),t(d.select(h).reverse(),function(e){if(d.getAttrib(e,"mce_new")||d.getAttribs(e).length<=1&&""===e.className){if(!d.getAttrib(e,"class")&&!d.getAttrib(e,"style"))return d.remove(e,1);d.setAttrib(e,"mce_new","")}}),f.moveToBookmark(o)},queryStateJustify:function(e,t){var n=this.editor,i=n.selection.getNode(),r=n.dom;return i&&"IMG"==i.nodeName?r.getStyle(i,"float")==t?1:i.parentNode.style.textAlign==t:(i=r.getParent(n.selection.getStart(),function(e){return 1==e.nodeType&&e.style.textAlign}),"full"==t&&(t="justify"),n.settings.inline_styles?i&&i.style.textAlign==t:this._queryState(e))},ForeColor:function(e,t){var n=this.editor;return n.settings.convert_fonts_to_spans?(this._applyInlineStyle("span",{style:{color:t}}),void 0):(n.getDoc().execCommand("ForeColor",!1,t),void 0)},HiliteColor:function(e,t){function n(e){if(i)try{s.execCommand("styleWithCSS",0,e)}catch(t){s.execCommand("useCSS",0,!e)}}var a=this,o=a.editor,s=o.getDoc();return o.settings.convert_fonts_to_spans?(this._applyInlineStyle("span",{style:{backgroundColor:t}}),void 0):(i||r?(n(!0),s.execCommand("hilitecolor",!1,t),n(!1)):s.execCommand("BackColor",!1,t),void 0)},Undo:function(){var e=this.editor;e.settings.custom_undo_redo?(e.undoManager.undo(),e.nodeChanged()):e.getDoc().execCommand("Undo",!1,null)},Redo:function(){var e=this.editor;e.settings.custom_undo_redo?(e.undoManager.redo(),e.nodeChanged()):e.getDoc().execCommand("Redo",!1,null)},FormatBlock:function(e,i){function r(e){return/^(P|DIV|H[1-6]|ADDRESS|BLOCKQUOTE|PRE)$/.test(e.nodeName)}var a,o,s,c=this,l=c.editor,u=l.selection,d=l.dom;return a=d.getParent(u.getNode(),function(e){return r(e)}),a&&(n&&r(a.parentNode)||"DIV"==a.nodeName)?(o=l.dom.create(i),t(d.getAttribs(a),function(e){d.setAttrib(o,e.nodeName,d.getAttrib(a,e.nodeName))}),s=u.getBookmark(),d.replace(o,a,1),u.moveToBookmark(s),l.nodeChanged(),void 0):(i=l.settings.forced_root_block?i||"<p>":i,-1==i.indexOf("<")&&(i="<"+i+">"),tinymce.isGecko&&(i=i.replace(/<(div|blockquote|code|dt|dd|dl|samp)>/gi,"$1")),l.getDoc().execCommand("FormatBlock",!1,i),void 0)},mceCleanup:function(){var e=this.editor,t=e.selection,n=t.getBookmark();e.setContent(e.getContent()),t.moveToBookmark(n)},mceRemoveNode:function(e,t){var n,i=this.editor,r=i.selection,a=t||r.getNode();a!=i.getBody()&&(n=r.getBookmark(),i.dom.remove(a,1),r.moveToBookmark(n),i.nodeChanged())},mceSelectNodeDepth:function(e,t){var n=this.editor,i=n.selection,r=0;n.dom.getParent(i.getNode(),function(e){return 1==e.nodeType&&r++==t?(i.select(e),n.nodeChanged(),!1):void 0},n.getBody())},mceSelectNode:function(e,t){this.editor.selection.select(t)},mceInsertContent:function(e,t){this.editor.selection.setContent(t)},mceInsertRawHTML:function(e,t){var n=this.editor;n.selection.setContent("tiny_mce_marker"),n.setContent(n.getContent().replace(/tiny_mce_marker/g,t))},mceRepaint:function(){var e,t,n=this.editor;if(tinymce.isGecko)try{e=n.selection,t=e.getBookmark(!0),e.getSel()&&e.getSel().selectAllChildren(n.getBody()),e.collapse(!0),e.moveToBookmark(t)}catch(i){}},queryStateUnderline:function(){var e=this.editor,t=e.selection.getNode();return t&&"A"==t.nodeName?!1:this._queryState("Underline")},queryStateOutdent:function(){var e,t=this.editor;if(t.settings.inline_styles){if((e=t.dom.getParent(t.selection.getStart(),t.dom.isBlock))&&parseInt(e.style.paddingLeft)>0)return!0;if((e=t.dom.getParent(t.selection.getEnd(),t.dom.isBlock))&&parseInt(e.style.paddingLeft)>0)return!0}return this.queryStateInsertUnorderedList()||this.queryStateInsertOrderedList()||!t.settings.inline_styles&&!!t.dom.getParent(t.selection.getNode(),"BLOCKQUOTE")},queryStateInsertUnorderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"UL")},queryStateInsertOrderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"OL")},queryStatemceBlockQuote:function(){return!!this.editor.dom.getParent(this.editor.selection.getStart(),function(e){return"BLOCKQUOTE"===e.nodeName})},mceBlockQuote:function(){function i(e){return g.getParent(e,function(e){return"BLOCKQUOTE"===e.nodeName})}var r,a,o,s,c,l,u,d,f,h=this,p=h.editor,m=p.selection,g=p.dom;if(r=g.getParent(m.getStart(),e),a=g.getParent(m.getEnd(),e),c=i(r)){if((r!=a||r.childNodes.length>1||1==r.childNodes.length&&"BR"!=r.firstChild.nodeName)&&(s=m.getBookmark()),i(a))for(u=c.cloneNode(!1);o=a.nextSibling;)u.appendChild(o.parentNode.removeChild(o));for(u&&g.insertAfter(u,c),f=h._getSelectedBlocks(r,a),d=f.length-1;d>=0;d--)g.insertAfter(f[d],c);return/^\s*$/.test(c.innerHTML)&&g.remove(c,1),u&&/^\s*$/.test(u.innerHTML)&&g.remove(u,1),s?h.editor.selection.moveToBookmark(s):n?(m.select(r),m.collapse(0),g.getParent(m.getStart(),e)!=r&&(l=m.getRng(),l.move("character",-1),l.select())):(l=p.getDoc().createRange(),l.setStart(r,0),l.setEnd(r,0),m.setRng(l)),void 0}return!n||r||a?(r&&a&&((r!=a||r.childNodes.length>1||1==r.childNodes.length&&"BR"!=r.firstChild.nodeName)&&(s=m.getBookmark()),t(h._getSelectedBlocks(i(m.getStart()),i(m.getEnd())),function(e){if("BLOCKQUOTE"==e.nodeName&&!c)return c=e,void 0;if(c||(c=g.create("blockquote"),e.parentNode.insertBefore(c,e)),"BLOCKQUOTE"==e.nodeName&&c){for(o=e.firstChild;o;)c.appendChild(o.cloneNode(!0)),o=o.nextSibling;return g.remove(e),void 0}c.appendChild(g.remove(e))}),s?m.moveToBookmark(s):n?(m.select(r),m.collapse(1)):(l=p.getDoc().createRange(),l.setStart(r,0),l.setEnd(r,0),m.setRng(l))),void 0):(h.editor.getDoc().execCommand("Indent"),o=i(m.getNode()),o.style.margin=o.dir="",void 0)},_applyInlineStyle:function(e,n,i){function r(){var r;return t(c.select(tinymce.isWebKit&&!tinymce.isAir?"span":"font"),function(t){("mceinline"==t.style.fontFamily||"mceinline"==t.face)&&(r||(r=s.selection.getBookmark()),n._mce_new="1",c.replace(c.create(e,n),t,1))}),t(c.select(e),function(r){function a(e){1==e.nodeType&&(t(n.style,function(t,n){c.setStyle(e,n,"")}),n["class"]&&e.className&&i&&t(i.check_classes,function(t){c.hasClass(e,t)&&c.removeClass(e,t)}))}r.getAttribute("_mce_new")&&(t(c.select(e,r),a),r.parentNode&&1==r.parentNode.nodeType&&1==r.parentNode.childNodes.length&&a(r.parentNode),c.getParent(r.parentNode,function(e){return 1==e.nodeType&&(n.style&&t(n.style,function(t,n){var i;!l[n]&&(i=c.getStyle(e,n))&&(i===t&&c.setStyle(r,n,""),l[n]=1)}),n["class"]&&e.className&&i&&t(i.check_classes,function(t){c.hasClass(e,t)&&c.removeClass(r,t)})),!1}),r.removeAttribute("_mce_new"))}),t(c.select(e).reverse(),function(e){var n=0;t(c.getAttribs(e),function(t){"_"!=t.nodeName.substring(0,1)&&""!=c.getAttrib(e,t.nodeName)&&n++}),0==n&&c.remove(e,1)}),s.selection.moveToBookmark(r),!!r}var a,o=this,s=o.editor,c=s.dom,l={};e=e.toUpperCase(),i&&i.check_classes&&n["class"]&&i.check_classes.push(n["class"]),s.focus(),s.getDoc().execCommand("FontName",!1,"mceinline"),r(),(a=o._applyInlineStyle.keyhandler)&&(s.onKeyUp.remove(a),s.onKeyPress.remove(a),s.onKeyDown.remove(a),s.onSetContent.remove(o._applyInlineStyle.chandler)),s.selection.isCollapsed()?(o._pendingStyles=tinymce.extend(o._pendingStyles||{},n.style),o._applyInlineStyle.chandler=s.onSetContent.add(function(){delete o._pendingStyles
}),o._applyInlineStyle.keyhandler=a=function(e){o._pendingStyles&&(n.style=o._pendingStyles,delete o._pendingStyles),r()&&(s.onKeyDown.remove(o._applyInlineStyle.keyhandler),s.onKeyPress.remove(o._applyInlineStyle.keyhandler)),"keyup"==e.type&&s.onKeyUp.remove(o._applyInlineStyle.keyhandler)},s.onKeyDown.add(a),s.onKeyPress.add(a),s.onKeyUp.add(a)):o._pendingStyles=0},_getSelectedBlocks:function(t,n){var i,r,a,o=this.editor,s=o.dom,c=o.selection,l=[];if(i=s.getParent(t||c.getStart(),e),r=s.getParent(n||c.getEnd(),e),i&&l.push(i),i&&r&&i!=r)for(a=i;(a=a.nextSibling)&&a!=r;)e(a)&&l.push(a);return r&&i!=r&&l.push(r),l}})}(),tinymce.create("tinymce.UndoManager",{index:0,data:null,typing:0,UndoManager:function(e){var t=this,n=tinymce.util.Dispatcher;t.editor=e,t.data=[],t.onAdd=new n(this),t.onUndo=new n(this),t.onRedo=new n(this)},add:function(e){var t,n,i,r=this,a=r.editor,o=a.settings;if(e=e||{},e.content=e.content||a.getContent({format:"raw",no_events:1}),e.content=e.content.replace(/^\s*|\s*$/g,""),i=r.data[r.index>0&&(0==r.index||r.index==r.data.length)?r.index-1:r.index],!e.initial&&i&&e.content==i.content)return null;if(o.custom_undo_redo_levels&&r.data.length>o.custom_undo_redo_levels){for(t=0;t<r.data.length-1;t++)r.data[t]=r.data[t+1];r.data.length--,r.index=r.data.length}return o.custom_undo_redo_restore_selection&&!e.initial&&(e.bookmark=n=e.bookmark||a.selection.getBookmark()),r.index<r.data.length&&r.index++,0!==r.data.length||e.initial?(r.data.length=r.index+1,r.data[r.index++]=e,e.initial&&(r.index=0),2==r.data.length&&r.data[0].initial&&(r.data[0].bookmark=n),r.onAdd.dispatch(r,e),a.isNotDirty=0,e):null},undo:function(){var e,t=this,n=t.editor,i=i;return t.typing&&(t.add(),t.typing=0),t.index>0&&(t.index==t.data.length&&t.index>1&&(e=t.index,t.typing=0,t.add()||(t.index=e),--t.index),i=t.data[--t.index],n.setContent(i.content,{format:"raw"}),n.selection.moveToBookmark(i.bookmark),t.onUndo.dispatch(t,i)),i},redo:function(){var e=this,t=e.editor,n=null;return e.index<e.data.length-1&&(n=e.data[++e.index],t.setContent(n.content,{format:"raw"}),t.selection.moveToBookmark(n.bookmark),e.onRedo.dispatch(e,n)),n},clear:function(){var e=this;e.data=[],e.index=0,e.typing=0,e.add({initial:!0})},hasUndo:function(){return 0!=this.index||this.typing},hasRedo:function(){return this.index<this.data.length-1}}),function(){var e,t,n,i,r,a;e=tinymce.dom.Event,t=tinymce.isIE,n=tinymce.isGecko,i=tinymce.isOpera,r=tinymce.each,a=tinymce.extend,tinymce.create("tinymce.ForceBlocks",{ForceBlocks:function(e){function n(e,n){i&&(n.content=n.content.replace(a.reOpera,"</"+r+">")),n.content=n.content.replace(a.rePadd,"<"+r+"$1$2$3$4$5$6></"+r+">"),t||i||!n.set?(n.content=n.content.replace(a.reBR2Nbsp,"<"+r+"$1$2></"+r+">"),n.content=n.content.replace(a.reTrailBr,"</"+r+">")):(n.content=n.content.replace(a.reNbsp2BR1,"<"+r+"$1$2><br /></"+r+">"),n.content=n.content.replace(a.reNbsp2BR2,"<"+r+"$1$2><br /></"+r+">"))}var r,a=this,o=e.settings;a.editor=e,a.dom=e.dom,r=(o.forced_root_block||"p").toLowerCase(),o.element=r.toUpperCase(),e.onPreInit.add(a.setup,a),a.reOpera=new RegExp("(\\u00a0|&#160;|&nbsp;)</"+r+">","gi"),a.rePadd=new RegExp("<p( )([^>]+)><\\/p>|<p( )([^>]+)\\/>|<p( )([^>]+)>\\s+<\\/p>|<p><\\/p>|<p\\/>|<p>\\s+<\\/p>".replace(/p/g,r),"gi"),a.reNbsp2BR1=new RegExp("<p( )([^>]+)>[\\s\\u00a0]+<\\/p>|<p>[\\s\\u00a0]+<\\/p>".replace(/p/g,r),"gi"),a.reNbsp2BR2=new RegExp("<p( )([^>]+)>(&nbsp;|&#160;)<\\/p>|<p>(&nbsp;|&#160;)<\\/p>".replace(/p/g,r),"gi"),a.reBR2Nbsp=new RegExp("<p( )([^>]+)>\\s*<br \\/>\\s*<\\/p>|<p>\\s*<br \\/>\\s*<\\/p>".replace(/p/g,r),"gi"),a.reTrailBr=new RegExp("\\s*<br \\/>\\s*<\\/p>".replace(/p/g,r),"gi"),e.onBeforeSetContent.add(n),e.onPostProcess.add(n),o.forced_root_block&&(e.onInit.add(a.forceRoots,a),e.onSetContent.add(a.forceRoots,a),e.onBeforeGetContent.add(a.forceRoots,a))},setup:function(){function i(e,t){var n=o.dom.create(t);return r(e.attributes,function(e){e.specified&&e.nodeValue&&n.setAttribute(e.nodeName.toLowerCase(),e.nodeValue)}),r(e.childNodes,function(e){n.appendChild(e.cloneNode(!0))}),e.parentNode.replaceChild(n,e),n}var a=this,o=a.editor,s=o.settings;return s.forced_root_block&&(o.onKeyUp.add(a.forceRoots,a),o.onPreProcess.add(a.forceRoots,a)),s.force_br_newlines?(t&&o.onKeyPress.add(function(t,n){var i,r=t.selection;return 13==n.keyCode&&"LI"!=r.getNode().nodeName?(r.setContent('<br id="__" /> ',{format:"raw"}),i=t.dom.get("__"),i.removeAttribute("id"),r.select(i),r.collapse(),e.cancel(n)):void 0}),void 0):(!t&&s.force_p_newlines&&(o.onKeyPress.add(function(t,n){13!=n.keyCode||n.shiftKey||a.insertPara(n)||e.cancel(n)}),n&&o.onKeyDown.add(function(e,t){8!=t.keyCode&&46!=t.keyCode||t.shiftKey||a.backspaceDelete(t,8==t.keyCode)})),t&&"P"!=s.element&&(o.onKeyPress.add(function(e){a.lastElm=e.selection.getNode().nodeName}),o.onKeyUp.add(function(e,t){var n,r=e.selection,o=r.getNode(),c=e.getBody();1===c.childNodes.length&&"P"==o.nodeName?(o=i(o,s.element),r.select(o),r.collapse(),e.nodeChanged()):13!=t.keyCode||t.shiftKey||"P"==a.lastElm||(n=e.dom.getParent(o,"P"),n&&(i(n,s.element),e.nodeChanged()))})),void 0)},find:function(e,t,n){for(var i=this.editor,r=i.getDoc().createTreeWalker(e,4,null,!1),a=-1;e=r.nextNode();){if(a++,0==t&&e==n)return a;if(1==t&&a==n)return e}return-1},forceRoots:function(e){var n,i,r,a,o,s,c,l,u,d,f,h,p=this,e=p.editor,m=e.getBody(),g=e.getDoc(),v=e.selection,y=v.getSel(),b=v.getRng(),x=-2,w=-16777215,C=m.childNodes;for(d=C.length-1;d>=0;d--)o=C[d],3==o.nodeType||!p.dom.isBlock(o)&&8!=o.nodeType?s?s.hasChildNodes()?s.insertBefore(o,s.firstChild):s.appendChild(o):(3!=o.nodeType||/[^\s]/g.test(o.nodeValue))&&(-2==x&&b&&(t?(a=g.body.createTextRange(),a.moveToElementText(m),a.collapse(1),c=-1*a.move("character",w),a=b.duplicate(),a.collapse(1),l=-1*a.move("character",w),a=b.duplicate(),a.collapse(0),u=-1*a.move("character",w)-l,x=l-c,n=u):1==b.startContainer.nodeType&&(f=b.startContainer.childNodes[b.startOffset])&&1==f.nodeType?(h=f.getAttribute("id"),f.setAttribute("id","__mce")):e.dom.getParent(b.startContainer,function(e){return e===m})&&(i=b.startOffset,r=b.endOffset,x=p.find(m,0,b.startContainer),n=p.find(m,0,b.endContainer))),s=e.dom.create(e.settings.forced_root_block),s.appendChild(o.cloneNode(1)),o.parentNode.replaceChild(s,o)):s=null;if(-2!=x)if(t)try{b=y.createRange(),b.moveToElementText(m),b.collapse(1),b.moveStart("character",x),b.moveEnd("character",n),b.select()}catch(F){}else s=m.getElementsByTagName(e.settings.element)[0],b=g.createRange(),-1!=x?b.setStart(p.find(m,1,x),i):b.setStart(s,0),-1!=n?b.setEnd(p.find(m,1,n),r):b.setEnd(s,0),y&&(y.removeAllRanges(),y.addRange(b));else!t&&(f=e.dom.get("__mce"))&&(h?f.setAttribute("id",h):f.removeAttribute("id"),b=g.createRange(),b.setStartBefore(f),b.setEndBefore(f),v.setRng(b))},getParentBlock:function(e){var t=this.dom;return t.getParent(e,t.isBlock)},insertPara:function(){function e(e){return e=e.innerHTML,e=e.replace(/<(img|hr|table)/gi,"-"),e=e.replace(/<[^>]+>/g,""),""==e.replace(/[ \t\r\n]+/g,"")}function t(e,t){var n,r,a,o=[];if(e.innerHTML="",S.keep_styles){r=t;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(r.nodeName)&&(n=r.cloneNode(!1),T.setAttrib(n,"id",""),o.push(n));while(r=r.parentNode)}if(o.length>0){for(a=o.length-1,n=e;a>=0;a--)n=n.appendChild(o[a]);return o[0].innerHTML=i?"&nbsp;":"<br />",o[0]}e.innerHTML=i?"&nbsp;":"<br />"}function r(e){return k.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1).nextNode()||e}var a,o,s,c,l,u,d,f,h,p,m,g,v,y,b,x,w,C,F=this,_=F.editor,T=_.dom,k=_.getDoc(),S=_.settings,E=_.selection.getSel(),M=E.getRangeAt(0),D=k.body,N=T.getViewPort(_.getWin());if(a=k.createRange(),a.setStart(E.anchorNode,E.anchorOffset),a.collapse(!0),o=k.createRange(),o.setStart(E.focusNode,E.focusOffset),o.collapse(!0),s=a.compareBoundaryPoints(a.START_TO_END,o)<0,c=s?E.anchorNode:E.focusNode,l=s?E.anchorOffset:E.focusOffset,u=s?E.focusNode:E.anchorNode,d=s?E.focusOffset:E.anchorOffset,c===u&&/^(TD|TH)$/.test(c.nodeName))return T.remove(c.firstChild),_.dom.add(c,S.element,null,"<br />"),g=_.dom.add(c,S.element,null,"<br />"),M=k.createRange(),M.selectNodeContents(g),M.collapse(1),_.selection.setRng(M),!1;if(c==D&&u==D&&D.firstChild&&_.dom.isBlock(D.firstChild)&&(c=u=c.firstChild,l=d=0,a=k.createRange(),a.setStart(c,0),o=k.createRange(),o.setStart(u,0)),c="HTML"==c.nodeName?k.body:c,c="BODY"==c.nodeName?c.firstChild:c,u="HTML"==u.nodeName?k.body:u,u="BODY"==u.nodeName?u.firstChild:u,f=F.getParentBlock(c),h=F.getParentBlock(u),p=f?f.nodeName:S.element,F.dom.getParent(f,function(e){return/OL|UL|PRE/.test(e.nodeName)}))return!0;f&&("CAPTION"==f.nodeName||/absolute|relative|static/gi.test(f.style.position))&&(p=S.element,f=null),h&&("CAPTION"==h.nodeName||/absolute|relative|static/gi.test(h.style.position))&&(p=S.element,h=null),(/(TD|TABLE|TH|CAPTION)/.test(p)||f&&"DIV"==p&&/left|right/gi.test(f.style.cssFloat))&&(p=S.element,f=h=null),m=f&&f.nodeName==p?f.cloneNode(0):_.dom.create(p),g=h&&h.nodeName==p?h.cloneNode(0):_.dom.create(p),g.removeAttribute("id"),/^(H[1-6])$/.test(p)&&c.nodeValue&&l==c.nodeValue.length&&(g=_.dom.create(S.element)),b=v=c;do{if(b==D||9==b.nodeType||F.dom.isBlock(b)||/(TD|TABLE|TH|CAPTION)/.test(b.nodeName))break;v=b}while(b=b.previousSibling?b.previousSibling:b.parentNode);b=y=u;do{if(b==D||9==b.nodeType||F.dom.isBlock(b)||/(TD|TABLE|TH|CAPTION)/.test(b.nodeName))break;y=b}while(b=b.nextSibling?b.nextSibling:b.parentNode);v.nodeName==p?a.setStart(v,0):a.setStartBefore(v),a.setEnd(c,l),m.appendChild(a.cloneContents()||k.createTextNode(""));try{o.setEndAfter(y)}catch(A){}return o.setStart(u,d),g.appendChild(o.cloneContents()||k.createTextNode("")),M=k.createRange(),v.previousSibling||v.parentNode.nodeName!=p?a.startContainer.nodeName==p&&0==a.startOffset?M.setStartBefore(a.startContainer):M.setStart(a.startContainer,a.startOffset):M.setStartBefore(v.parentNode),y.nextSibling||y.parentNode.nodeName!=p?M.setEnd(o.endContainer,o.endOffset):M.setEndAfter(y.parentNode),M.deleteContents(),i&&_.getWin().scrollTo(0,N.y),m.firstChild&&m.firstChild.nodeName==p&&(m.innerHTML=m.firstChild.innerHTML),g.firstChild&&g.firstChild.nodeName==p&&(g.innerHTML=g.firstChild.innerHTML),e(m)&&(m.innerHTML="<br />"),e(g)&&(C=t(g,u)),i&&parseFloat(opera.version())<9.5?(M.insertNode(m),M.insertNode(g)):(M.insertNode(g),M.insertNode(m)),g.normalize(),m.normalize(),M=k.createRange(),M.selectNodeContents(n?r(C||g):C||g),M.collapse(1),E.removeAllRanges(),E.addRange(M),x=_.dom.getPos(g).y,w=g.clientHeight,(x<N.y||x+w>N.y+N.h)&&_.getWin().scrollTo(0,x<N.y?x:x-N.h+25),!1},backspaceDelete:function(t,n){function i(t){var n;if(t=t.target,t&&t.parentNode&&"BR"==t.nodeName&&(r=s.getParentBlock(t))){if(n=t.previousSibling,e.remove(l,"DOMNodeInserted",i),n&&3==n.nodeType&&/\s+$/.test(n.nodeValue))return;(t.previousSibling||t.nextSibling)&&c.dom.remove(t)}}var r,r,a,o,s=this,c=s.editor,l=c.getBody(),u=c.selection,d=u.getRng(),f=d.startContainer;if(f&&c.dom.isBlock(f)&&!/^(TD|TH)$/.test(f.nodeName)&&n&&(0==f.childNodes.length||1==f.childNodes.length&&"BR"==f.firstChild.nodeName)){for(r=f;(r=r.previousSibling)&&!c.dom.isBlock(r););if(r){if(f!=l.firstChild){for(a=c.dom.doc.createTreeWalker(r,NodeFilter.SHOW_TEXT,null,!1);o=a.nextNode();)r=o;d=c.getDoc().createRange(),d.setStart(r,r.nodeValue?r.nodeValue.length:0),d.setEnd(r,r.nodeValue?r.nodeValue.length:0),u.setRng(d),c.dom.remove(f)}return e.cancel(t)}}e._add(l,"DOMNodeInserted",i),window.setTimeout(function(){e._remove(l,"DOMNodeInserted",i)},1)}})}(),function(){var e=(tinymce.DOM,tinymce.dom.Event),t=tinymce.each,n=tinymce.extend;tinymce.create("tinymce.ControlManager",{ControlManager:function(e,n){var i=this;n=n||{},i.editor=e,i.controls={},i.onAdd=new tinymce.util.Dispatcher(i),i.onPostRender=new tinymce.util.Dispatcher(i),i.prefix=n.prefix||e.id+"_",i._cls={},i.onPostRender.add(function(){t(i.controls,function(e){e.postRender()})})},get:function(e){return this.controls[this.prefix+e]||this.controls[e]},setActive:function(e,t){var n=null;return(n=this.get(e))&&n.setActive(t),n},setDisabled:function(e,t){var n=null;return(n=this.get(e))&&n.setDisabled(t),n},add:function(e){var t=this;return e&&(t.controls[e.id]=e,t.onAdd.dispatch(e,t)),e},createControl:function(e){var n,i=this,r=i.editor;switch(t(r.plugins,function(t){return t.createControl&&(n=t.createControl(e,i))?!1:void 0}),e){case"|":case"separator":return i.createSeparator()}return!n&&r.buttons&&(n=r.buttons[e])?i.createButton(e,n):i.add(n)},createDropMenu:function(e,t,i){var r,a,o,s,c=this,l=c.editor;return t=n({"class":"mceDropDown",constrain:l.settings.constrain_menus},t),t["class"]=t["class"]+" "+l.getParam("skin")+"Skin",(o=l.getParam("skin_variant"))&&(t["class"]+=" "+l.getParam("skin")+"Skin"+o.substring(0,1).toUpperCase()+o.substring(1)),e=c.prefix+e,s=i||c._cls.dropmenu||tinymce.ui.DropMenu,r=c.controls[e]=new s(e,t),r.onAddItem.add(function(e,t){var n=t.settings;n.title=l.getLang(n.title,n.title),n.onclick||(n.onclick=function(){l.execCommand(n.cmd,n.ui||!1,n.value)})}),l.onRemove.add(function(){r.destroy()}),tinymce.isIE&&(r.onShowMenu.add(function(){a=l.selection.getBookmark(1)}),r.onHideMenu.add(function(){a&&l.selection.moveToBookmark(a)})),c.add(r)},createListBox:function(t,i,r){var a,o,s=this,c=s.editor;return s.get(t)?null:(i.title=c.translate(i.title),i.scope=i.scope||c,i.onselect||(i.onselect=function(e){c.execCommand(i.cmd,i.ui||!1,e||i.value)}),i=n({title:i.title,"class":"mce_"+t,scope:i.scope,control_manager:s},i),t=s.prefix+t,c.settings.use_native_selects?a=new tinymce.ui.NativeListBox(t,i):(o=r||s._cls.listbox||tinymce.ui.ListBox,a=new o(t,i)),s.controls[t]=a,tinymce.isWebKit&&a.onPostRender.add(function(t,n){e.add(n,"mousedown",function(){c.bookmark=c.selection.getBookmark("simple")}),e.add(n,"focus",function(){c.selection.moveToBookmark(c.bookmark),c.bookmark=null})}),a.hideMenu&&c.onMouseDown.add(a.hideMenu,a),s.add(a))},createButton:function(e,t,i){var r,a,o=this,s=o.editor;return o.get(e)?null:(t.title=s.translate(t.title),t.label=s.translate(t.label),t.scope=t.scope||s,t.onclick||t.menu_button||(t.onclick=function(){s.execCommand(t.cmd,t.ui||!1,t.value)}),t=n({title:t.title,"class":"mce_"+e,unavailable_prefix:s.getLang("unavailable",""),scope:t.scope,control_manager:o},t),e=o.prefix+e,t.menu_button?(a=i||o._cls.menubutton||tinymce.ui.MenuButton,r=new a(e,t),s.onMouseDown.add(r.hideMenu,r)):(a=o._cls.button||tinymce.ui.Button,r=new a(e,t)),o.add(r))},createMenuButton:function(e,t,n){return t=t||{},t.menu_button=1,this.createButton(e,t,n)},createSplitButton:function(e,t,i){var r,a,o=this,s=o.editor;return o.get(e)?null:(t.title=s.translate(t.title),t.scope=t.scope||s,t.onclick||(t.onclick=function(e){s.execCommand(t.cmd,t.ui||!1,e||t.value)}),t.onselect||(t.onselect=function(e){s.execCommand(t.cmd,t.ui||!1,e||t.value)}),t=n({title:t.title,"class":"mce_"+e,scope:t.scope,control_manager:o},t),e=o.prefix+e,a=i||o._cls.splitbutton||tinymce.ui.SplitButton,r=o.add(new a(e,t)),s.onMouseDown.add(r.hideMenu,r),r)},createColorSplitButton:function(e,t,i){var r,a,o,s=this,c=s.editor;return s.get(e)?null:(t.title=c.translate(t.title),t.scope=t.scope||c,t.onclick||(t.onclick=function(e){c.execCommand(t.cmd,t.ui||!1,e||t.value)}),t.onselect||(t.onselect=function(e){c.execCommand(t.cmd,t.ui||!1,e||t.value)}),t=n({title:t.title,"class":"mce_"+e,menu_class:c.getParam("skin")+"Skin",scope:t.scope,more_colors_title:c.getLang("more_colors")},t),e=s.prefix+e,a=i||s._cls.colorsplitbutton||tinymce.ui.ColorSplitButton,r=new a(e,t),c.onMouseDown.add(r.hideMenu,r),c.onRemove.add(function(){r.destroy()}),tinymce.isIE&&(r.onShowMenu.add(function(){o=c.selection.getBookmark(1)}),r.onHideMenu.add(function(){o&&(c.selection.moveToBookmark(o),o=0)})),s.add(r))},createToolbar:function(e,t,n){var i,r,a=this;return e=a.prefix+e,r=n||a._cls.toolbar||tinymce.ui.Toolbar,i=new r(e,t),a.get(e)?null:a.add(i)},createSeparator:function(e){var t=e||this._cls.separator||tinymce.ui.Separator;return new t},setControlType:function(e,t){return this._cls[e.toLowerCase()]=t},destroy:function(){t(this.controls,function(e){e.destroy()}),this.controls=null}})}(),function(){var e=tinymce.util.Dispatcher,t=tinymce.each,n=tinymce.isIE,i=tinymce.isOpera;tinymce.create("tinymce.WindowManager",{WindowManager:function(t){var n=this;n.editor=t,n.onOpen=new e(n),n.onClose=new e(n),n.params={},n.features={}},open:function(e,r){var a,o,s,c,l=this,u="",d="modal"==l.editor.settings.dialog_type,f=tinymce.DOM.getViewPort();e=e||{},r=r||{},o=i?f.w:screen.width,s=i?f.h:screen.height,e.name=e.name||"mc_"+(new Date).getTime(),e.width=parseInt(e.width||320),e.height=parseInt(e.height||240),e.resizable=!0,e.left=e.left||parseInt(o/2)-e.width/2,e.top=e.top||parseInt(s/2)-e.height/2,r.inline=!1,r.mce_width=e.width,r.mce_height=e.height,r.mce_auto_focus=e.auto_focus,d&&n&&(e.center=!0,e.help=!1,e.dialogWidth=e.width+"px",e.dialogHeight=e.height+"px",e.scroll=e.scrollbars||!1),t(e,function(e,t){tinymce.is(e,"boolean")&&(e=e?"yes":"no"),/^(name|url)$/.test(t)||(u+=n&&d?(u?";":"")+t+":"+e:(u?",":"")+t+"="+e)}),l.features=e,l.params=r,l.onOpen.dispatch(l,e,r),c=e.url||e.file,tinymce.relaxedDomain&&(c+=(-1==c.indexOf("?")?"?":"&")+"mce_rdomain="+tinymce.relaxedDomain),c=tinymce._addVer(c);try{n&&d?(a=1,window.showModalDialog(c,window,u)):a=window.open(c,e.name,u)}catch(h){}a||alert(l.editor.getLang("popup_blocked"))},close:function(e){e.close(),this.onClose.dispatch(this)},createInstance:function(e,t,n,i,r,a){var o=tinymce.resolve(e);return new o(t,n,i,r,a)},confirm:function(e,t,n,i){i=i||window,t.call(n||this,i.confirm(this._decode(this.editor.getLang(e,e))))},alert:function(e,t,n,i){var r=this;i=i||window,i.alert(r._decode(r.editor.getLang(e,e))),t&&t.call(n||r)},_decode:function(e){return tinymce.DOM.decode(e).replace(/\\n/g,"\n")}})}();